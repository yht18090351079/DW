{"ast":null,"code":"var _jsxFileName = \"/Volumes/ORICO/\\u516C\\u53F8/\\u65B0\\u7586\\u7535\\u7F51/\\u6837\\u4F8B/src/components/MapComponent.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef, useState } from 'react';\nimport './MapComponent.css';\nimport { powerGridData, userGridData, areaLossData, abnormalMeters } from '../data/powerGridData';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst MapComponent = () => {\n  _s();\n  var _selectedStation$load, _selectedStation$load2, _selectedStation$load3, _selectedStation$load4, _selectedStation$load5, _selectedStation$load6, _selectedStation$load7;\n  const mapRef = useRef(null);\n  const mapInstance = useRef(null);\n  const [showValidationPanel, setShowValidationPanel] = useState(false);\n  const [showAbnormalList, setShowAbnormalList] = useState(false);\n  const [showLossAnalysis, setShowLossAnalysis] = useState(false);\n  const [lossChartType, setLossChartType] = useState('bar'); // 'bar' æˆ– 'line'\n  const [validationResults, setValidationResults] = useState([]);\n  const [showLoadMonitor, setShowLoadMonitor] = useState(false);\n  const [selectedStation, setSelectedStation] = useState(null);\n  const [showMeterBoxes, setShowMeterBoxes] = useState(false);\n  const [, setCurrentZoom] = useState(10);\n  const [autoMeterBoxMode, setAutoMeterBoxMode] = useState(false);\n  const [autoValidationMode, setAutoValidationMode] = useState(false);\n  const meterBoxPopups = useRef([]);\n  const validationPopups = useRef([]);\n  useEffect(() => {\n    // å»¶è¿Ÿæ£€æŸ¥ï¼Œç¡®ä¿é«˜å¾·åœ°å›¾APIæœ‰æ—¶é—´åŠ è½½\n    const timer = setTimeout(() => {\n      if (!window.AMap) {\n        console.warn('é«˜å¾·åœ°å›¾APIæœªåŠ è½½ï¼Œå¯ç”¨æ¼”ç¤ºæ¨¡å¼');\n        showFallbackMap();\n        return;\n      }\n      try {\n        // åˆå§‹åŒ–åœ°å›¾\n        mapInstance.current = new window.AMap.Map(mapRef.current, {\n          zoom: 10,\n          center: [116.397428, 39.90923],\n          // åŒ—äº¬ä¸­å¿ƒç‚¹\n          mapStyle: 'amap://styles/blue',\n          // è“è‰²ä¸»é¢˜\n          viewMode: '2D',\n          lang: 'zh_cn'\n        });\n\n        // åœ°å›¾åŠ è½½å®Œæˆåæ·»åŠ ç”µåŠ›ç”µç½‘æ•°æ®ç‚¹\n        mapInstance.current.on('complete', () => {\n          addPowerGridMarkers();\n        });\n\n        // å­˜å‚¨ç¼©æ”¾å¤„ç†å‡½æ•°çš„å¼•ç”¨\n        const zoomHandler = () => {\n          const zoom = mapInstance.current.getZoom();\n          setCurrentZoom(zoom);\n        };\n\n        // ç›‘å¬åœ°å›¾ç¼©æ”¾å˜åŒ–\n        mapInstance.current.on('zoomchange', zoomHandler);\n      } catch (error) {\n        console.error('åœ°å›¾åˆå§‹åŒ–å¤±è´¥:', error);\n        showFallbackMap();\n      }\n    }, 1000);\n\n    // æ¸…ç†å‡½æ•°\n    return () => {\n      clearTimeout(timer);\n      if (mapInstance.current) {\n        try {\n          mapInstance.current.destroy();\n        } catch (error) {\n          console.warn('åœ°å›¾é”€æ¯æ—¶å‡ºé”™:', error);\n        }\n      }\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  // è‡ªåŠ¨åŠŸèƒ½ï¼ˆè¡¨ç®±å’Œæ ¡éªŒé”™è¯¯ï¼‰\n  useEffect(() => {\n    if (!mapInstance.current) return;\n    const handleZoomChange = () => {\n      const zoom = mapInstance.current.getZoom();\n\n      // è‡ªåŠ¨è¡¨ç®±åŠŸèƒ½ (ç¼©æ”¾çº§åˆ« >= 14)\n      if (autoMeterBoxMode) {\n        if (zoom >= 14) {\n          openAllMeterBoxPopups();\n        } else {\n          closeAllMeterBoxPopups();\n        }\n      }\n\n      // è‡ªåŠ¨æ ¡éªŒé”™è¯¯åŠŸèƒ½ (ç¼©æ”¾çº§åˆ« >= 12)\n      if (autoValidationMode) {\n        if (zoom >= 12) {\n          openAllValidationErrorPopups();\n        } else {\n          closeAllValidationErrorPopups();\n        }\n      }\n    };\n\n    // ç›‘å¬ç¼©æ”¾å˜åŒ–\n    mapInstance.current.on('zoomchange', handleZoomChange);\n\n    // ç«‹å³æ£€æŸ¥å½“å‰çŠ¶æ€\n    if (autoMeterBoxMode || autoValidationMode) {\n      handleZoomChange();\n    } else {\n      closeAllMeterBoxPopups();\n      closeAllValidationErrorPopups();\n    }\n    return () => {\n      if (mapInstance.current) {\n        mapInstance.current.off('zoomchange', handleZoomChange);\n      }\n    };\n  }, [autoMeterBoxMode, autoValidationMode]);\n\n  // æ·»åŠ å…¨å±€å‡½æ•°åˆ°windowå¯¹è±¡ï¼Œä¾›ä¿¡æ¯çª—å£è°ƒç”¨\n  useEffect(() => {\n    // è¡¨ç®±å¸ƒå±€ç°åœ¨é»˜è®¤æ˜¾ç¤ºï¼Œä¸éœ€è¦åˆ‡æ¢å‡½æ•°\n\n    window.fixValidationError = deviceId => {\n      alert(`æ­£åœ¨ä¿®å¤è®¾å¤‡ ${deviceId} çš„æ ¡éªŒé”™è¯¯...`);\n      // è¿™é‡Œå¯ä»¥å®ç°å®é™…çš„ä¿®å¤é€»è¾‘\n    };\n    return () => {\n      delete window.showMeterLayout;\n      delete window.fixValidationError;\n    };\n  }, []);\n  const showFallbackMap = () => {\n    // æ˜¾ç¤ºæ¨¡æ‹Ÿåœ°å›¾ç•Œé¢\n    if (mapRef.current) {\n      mapRef.current.innerHTML = `\n        <div style=\"\n          width: 100%;\n          height: 100%;\n          background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n          position: relative;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          color: white;\n          font-size: 18px;\n          text-align: center;\n        \">\n          <div>\n            <h3 style=\"margin-bottom: 20px;\">ğŸ“ ç”µåŠ›ç”µç½‘åœ°å›¾æ¼”ç¤ºæ¨¡å¼</h3>\n            <p style=\"margin-bottom: 10px;\">é«˜å¾·åœ°å›¾APIæœªé…ç½®</p>\n            <p style=\"margin-bottom: 20px; font-size: 14px; opacity: 0.8;\">\n              è¯·ç”³è¯·é«˜å¾·åœ°å›¾API Keyå¹¶åœ¨ public/index.html ä¸­é…ç½®\n            </p>\n            <p style=\"font-size: 14px; opacity: 0.8;\">\n              æˆ–æŸ¥çœ‹ demo.html æ–‡ä»¶è·å¾—å®Œæ•´æ¼”ç¤ºæ•ˆæœ\n            </p>\n          </div>\n        </div>\n      `;\n      // æ·»åŠ æ¨¡æ‹Ÿçš„ç”µåŠ›è®¾æ–½æ ‡è®°\n      addFallbackMarkers();\n    }\n  };\n  const addFallbackMarkers = () => {\n    // è®¾æ–½ç‚¹ä½\n    const facilities = [{\n      name: 'åŒ—äº¬ç¬¬ä¸€çƒ­ç”µå‚',\n      type: 'å‘ç”µå‚',\n      x: 20,\n      y: 15,\n      status: 'æ­£å¸¸'\n    }, {\n      name: 'æœé˜³å˜ç”µç«™',\n      type: 'å˜ç”µç«™',\n      x: 40,\n      y: 25,\n      status: 'æ­£å¸¸'\n    }, {\n      name: 'æµ·æ·€å˜ç”µç«™',\n      type: 'å˜ç”µç«™',\n      x: 15,\n      y: 35,\n      status: 'ç»´æŠ¤'\n    }, {\n      name: 'å¤§å…´ç‡ƒæ°”ç”µå‚',\n      type: 'å‘ç”µå‚',\n      x: 25,\n      y: 65,\n      status: 'æ­£å¸¸'\n    }, {\n      name: 'ä¸°å°å˜ç”µç«™',\n      type: 'å˜ç”µç«™',\n      x: 35,\n      y: 55,\n      status: 'æ­£å¸¸'\n    }];\n\n    // è¾“ç”µçº¿è·¯ï¼ˆè¿æ¥å„ä¸ªè®¾æ–½ï¼‰\n    const transmissionLines = [{\n      name: 'ä¸œåŸè¾“ç”µçº¿è·¯1',\n      start: {\n        x: 20,\n        y: 15\n      },\n      end: {\n        x: 40,\n        y: 25\n      },\n      status: 'æ­£å¸¸'\n    }, {\n      name: 'è¥¿åŸè¾“ç”µçº¿è·¯2',\n      start: {\n        x: 15,\n        y: 35\n      },\n      end: {\n        x: 35,\n        y: 55\n      },\n      status: 'æ•…éšœ'\n    }, {\n      name: 'æˆ¿å±±è¾“ç”µçº¿è·¯3',\n      start: {\n        x: 25,\n        y: 65\n      },\n      end: {\n        x: 35,\n        y: 55\n      },\n      status: 'æ­£å¸¸'\n    }];\n\n    // ç»˜åˆ¶è®¾æ–½ç‚¹ä½\n    facilities.forEach(facility => {\n      const markerEl = document.createElement('div');\n      const colors = {\n        'å‘ç”µå‚': '#ff6600',\n        'å˜ç”µç«™': '#0066ff'\n      };\n      const icons = {\n        'å‘ç”µå‚': 'âš¡',\n        'å˜ç”µç«™': 'ğŸ”Œ'\n      };\n      markerEl.style.cssText = `\n        position: absolute;\n        left: ${facility.x}%;\n        top: ${facility.y}%;\n        width: 30px;\n        height: 30px;\n        background: ${colors[facility.type]};\n        border-radius: 50%;\n        border: 2px solid white;\n        color: white;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        font-size: 14px;\n        cursor: pointer;\n        box-shadow: 0 2px 8px rgba(0,0,0,0.3);\n        animation: pulse 2s infinite;\n        z-index: 10;\n      `;\n      markerEl.innerHTML = icons[facility.type];\n      markerEl.title = `${facility.name} - ${facility.status}`;\n      mapRef.current.appendChild(markerEl);\n    });\n\n    // ç»˜åˆ¶è¾“ç”µçº¿è·¯\n    transmissionLines.forEach(line => {\n      const lineEl = document.createElement('div');\n      const dx = line.end.x - line.start.x;\n      const dy = line.end.y - line.start.y;\n      const length = Math.sqrt(dx * dx + dy * dy);\n      const angle = Math.atan2(dy, dx) * 180 / Math.PI;\n      const lineColor = line.status === 'æ•…éšœ' ? '#ff0000' : '#00ff00';\n      const lineStyle = line.status === 'æ•…éšœ' ? 'dashed' : 'solid';\n      lineEl.style.cssText = `\n        position: absolute;\n        left: ${line.start.x}%;\n        top: ${line.start.y}%;\n        width: ${length}%;\n        height: 4px;\n        background: ${lineColor};\n        border-radius: 2px;\n        transform-origin: 0 50%;\n        transform: rotate(${angle}deg);\n        cursor: pointer;\n        z-index: 5;\n        ${lineStyle === 'dashed' ? 'border: 2px dashed ' + lineColor + '; background: transparent;' : ''}\n      `;\n      lineEl.title = `${line.name} - ${line.status}`;\n      mapRef.current.appendChild(lineEl);\n\n      // åœ¨çº¿è·¯ä¸­ç‚¹æ·»åŠ æ ‡è¯†\n      const midX = (line.start.x + line.end.x) / 2;\n      const midY = (line.start.y + line.end.y) / 2;\n      const lineLabelEl = document.createElement('div');\n      lineLabelEl.style.cssText = `\n        position: absolute;\n        left: ${midX}%;\n        top: ${midY}%;\n        width: 20px;\n        height: 20px;\n        background: #ff3300;\n        border-radius: 50%;\n        border: 2px solid white;\n        color: white;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        font-size: 12px;\n        cursor: pointer;\n        box-shadow: 0 2px 8px rgba(0,0,0,0.3);\n        z-index: 15;\n      `;\n      lineLabelEl.innerHTML = 'ğŸ”—';\n      lineLabelEl.title = `${line.name} - ${line.status}`;\n      mapRef.current.appendChild(lineLabelEl);\n    });\n  };\n\n  // åˆ›å»ºå®Œå…¨æ¨¡æ‹Ÿé«˜å¾·åœ°å›¾InfoWindowæ ·å¼çš„è‡ªå®šä¹‰æ ‡è®°ï¼ˆç´§å‡‘ç‰ˆï¼‰\n  const createCustomInfoWindow = (data, position) => {\n    const voltage = data.voltageData || {};\n\n    // ç´§å‡‘ç‰ˆè¡¨ç®±ä¿¡æ¯çª—å£\n    const content = `\n      <div class=\"amap-info-window-wrapper\" style=\"\n        background: white;\n        border: 1px solid #b8b8b8;\n        border-radius: 3px;\n        box-shadow: 0 2px 6px rgba(0,0,0,0.3);\n        position: relative;\n        font-family: 'Microsoft YaHei', Arial, sans-serif;\n        font-size: 11px;\n        line-height: 1.2;\n        max-width: 280px;\n        padding: 8px;\n      \">\n        <!-- é«˜å¾·åœ°å›¾InfoWindowçš„å°ä¸‰è§’ -->\n        <div style=\"\n          position: absolute;\n          bottom: -6px;\n          left: 50%;\n          transform: translateX(-50%);\n          width: 0;\n          height: 0;\n          border-left: 6px solid transparent;\n          border-right: 6px solid transparent;\n          border-top: 6px solid white;\n          z-index: 2;\n        \"></div>\n        <div style=\"\n          position: absolute;\n          bottom: -7px;\n          left: 50%;\n          transform: translateX(-50%);\n          width: 0;\n          height: 0;\n          border-left: 7px solid transparent;\n          border-right: 7px solid transparent;\n          border-top: 7px solid #b8b8b8;\n          z-index: 1;\n        \"></div>\n\n        <!-- ç´§å‡‘çš„å†…å®¹ç»“æ„ -->\n        <div style=\"margin: 0; padding: 0;\">\n          <h3 style=\"margin: 0 0 4px 0; font-size: 12px; color: #333;\">${data.name}</h3>\n          <div style=\"font-size: 10px; color: #666; margin-bottom: 6px;\">\n            ${data.type} | ${voltage.current || 'N/A'}V | ${data.address}\n          </div>\n          <div style=\"font-size: 10px;\">\n            <strong style=\"color: #333;\">è¡¨è®¡å¸ƒå±€:</strong>\n            <div style=\"display: grid; grid-template-columns: repeat(3, 1fr); gap: 2px; margin-top: 3px;\">\n              ${data.meterLayout ? data.meterLayout.map(meter => `\n                <div style=\"\n                  background: ${meter.status === 'æ­£å¸¸' ? '#e8f5e8' : '#ffe8e8'};\n                  border: 1px solid ${meter.status === 'æ­£å¸¸' ? '#4caf50' : '#f44336'};\n                  border-radius: 2px;\n                  padding: 2px;\n                  text-align: center;\n                  font-size: 8px;\n                \">\n                  <div style=\"font-weight: bold;\">${meter.user}</div>\n                  <div>${meter.voltage}V</div>\n                </div>\n              `).join('') : 'æ— æ•°æ®'}\n            </div>\n          </div>\n        </div>\n      </div>\n    `;\n    const marker = new window.AMap.Marker({\n      position: position,\n      content: content,\n      offset: new window.AMap.Pixel(0, -30),\n      zIndex: 1000\n    });\n    return marker;\n  };\n\n  // æ–°çš„è‡ªåŠ¨è¡¨ç®±åŠŸèƒ½ - ä½¿ç”¨è‡ªå®šä¹‰MarkeråŒæ—¶æ˜¾ç¤ºå¤šä¸ª\n  const openAllMeterBoxPopups = () => {\n    if (!mapInstance.current || !window.AMap) return;\n\n    // å…ˆå…³é—­æ‰€æœ‰ç°æœ‰æ˜¾ç¤º\n    closeAllMeterBoxPopups();\n\n    // è·å–æ‰€æœ‰è¡¨ç®±æ•°æ®\n    const meterBoxes = [...powerGridData.filter(item => item.type === 'è¡¨ç®±'), ...userGridData.filter(item => item.type === 'è¡¨ç®±')];\n    console.log('=== è‡ªåŠ¨è¡¨ç®±åŠŸèƒ½è°ƒè¯• ===');\n    console.log('æ‰¾åˆ°çš„è¡¨ç®±æ•°æ®:', meterBoxes.map(box => ({\n      id: box.id,\n      name: box.name\n    })));\n\n    // è·å–åœ°å›¾ä¸Šæ‰€æœ‰æ ‡è®°\n    const markers = mapInstance.current.getAllOverlays('marker');\n    console.log('åœ°å›¾ä¸Šçš„æ ‡è®°æ€»æ•°:', markers.length);\n    let successCount = 0;\n    meterBoxes.forEach(box => {\n      console.log(`æŸ¥æ‰¾è¡¨ç®±: ${box.name} (ID: ${box.id})`);\n\n      // æ‰¾åˆ°å¯¹åº”çš„æ ‡è®°\n      const marker = markers.find(m => {\n        const data = m.getExtData();\n        return data && data.id === box.id;\n      });\n      if (marker) {\n        console.log(`âœ“ æ‰¾åˆ°æ ‡è®°: ${box.name}`);\n        const data = marker.getExtData();\n\n        // åˆ›å»ºè‡ªå®šä¹‰ä¿¡æ¯çª—å£Marker\n        const infoMarker = createCustomInfoWindow(data, marker.getPosition());\n        infoMarker.setMap(mapInstance.current);\n        meterBoxPopups.current.push(infoMarker);\n        successCount++;\n        console.log(`âœ“ è‡ªå®šä¹‰InfoWindowå·²åˆ›å»º: ${box.name}`);\n      } else {\n        console.log(`âœ— æœªæ‰¾åˆ°æ ‡è®°: ${box.name} (ID: ${box.id})`);\n      }\n    });\n    console.log(`æ€»å…±æˆåŠŸåˆ›å»ºäº† ${successCount} ä¸ªè‡ªå®šä¹‰InfoWindow`);\n    console.log('=== è°ƒè¯•ç»“æŸ ===');\n  };\n\n  // æ–°çš„è‡ªåŠ¨è¡¨ç®±åŠŸèƒ½ - å…³é—­æ‰€æœ‰è¡¨ç®±è‡ªå®šä¹‰Marker\n  const closeAllMeterBoxPopups = () => {\n    meterBoxPopups.current.forEach(infoMarker => {\n      try {\n        infoMarker.setMap(null); // ç§»é™¤è‡ªå®šä¹‰Marker\n      } catch (e) {\n        // å¿½ç•¥å…³é—­é”™è¯¯\n      }\n    });\n    meterBoxPopups.current = [];\n    console.log('æ‰€æœ‰è¡¨ç®±è‡ªå®šä¹‰InfoWindowå·²å…³é—­');\n  };\n  const addPowerGridMarkers = () => {\n    // æ·»åŠ ç”µåŠ›è®¾å¤‡\n    powerGridData.forEach(item => {\n      if (item.type === 'è¾“ç”µçº¿è·¯') {\n        // ç»˜åˆ¶è¾“ç”µçº¿è·¯\n        addTransmissionLine(item);\n      } else {\n        // ç»˜åˆ¶ç‚¹æ ‡è®°ï¼ˆå‘ç”µå‚ã€å˜ç”µç«™ï¼‰\n        addPointMarker(item);\n      }\n    });\n\n    // æ·»åŠ ç”¨æˆ·è®¾å¤‡ï¼ˆè¡¨ç®±ï¼‰\n    userGridData.forEach(item => {\n      addUserMarker(item);\n    });\n\n    // æ·»åŠ æ‰€æœ‰å¼‚å¸¸è®¾å¤‡çš„å¯è§†åŒ–æ ‡è¯†\n    addAbnormalDeviceMarkers();\n  };\n\n  // æ·»åŠ å¼‚å¸¸è®¾å¤‡å¯è§†åŒ–æ ‡è®°ï¼ˆé€‚åˆæ‰“å°ï¼‰\n  const addAbnormalDeviceMarkers = () => {\n    // æ”¶é›†æ‰€æœ‰å¼‚å¸¸è®¾å¤‡\n    const allAbnormalDevices = [];\n\n    // æ”¶é›†ç”µåŠ›è®¾å¤‡å¼‚å¸¸\n    powerGridData.forEach(device => {\n      if (device.validationErrors && device.validationErrors.length > 0) {\n        allAbnormalDevices.push({\n          id: device.id,\n          name: device.name,\n          type: device.type,\n          location: {\n            lng: device.longitude,\n            lat: device.latitude\n          },\n          errors: device.validationErrors\n        });\n      }\n    });\n\n    // æ”¶é›†æ‰€æœ‰è¡¨ç®±å¼‚å¸¸ï¼ˆä»ä¸¤ä¸ªæ•°æ®æºï¼‰\n    const allMeterBoxes = [...powerGridData.filter(item => item.type === 'è¡¨ç®±'), ...userGridData.filter(item => item.type === 'è¡¨ç®±')];\n    allMeterBoxes.forEach(box => {\n      var _box$meterLayout, _box$meterLayout$mete;\n      const abnormalMeters = ((_box$meterLayout = box.meterLayout) === null || _box$meterLayout === void 0 ? void 0 : (_box$meterLayout$mete = _box$meterLayout.meters) === null || _box$meterLayout$mete === void 0 ? void 0 : _box$meterLayout$mete.filter(m => m.status !== 'æ­£å¸¸')) || [];\n      if (abnormalMeters.length > 0) {\n        allAbnormalDevices.push({\n          id: box.id,\n          name: box.name,\n          type: 'è¡¨ç®±å¼‚å¸¸',\n          location: {\n            lng: box.longitude,\n            lat: box.latitude\n          },\n          errors: abnormalMeters.map(m => ({\n            type: 'warning',\n            message: `${m.id}: ${m.status}`,\n            field: 'meter_status'\n          }))\n        });\n      }\n    });\n\n    // ä¸ºæ¯ä¸ªå¼‚å¸¸è®¾å¤‡æ·»åŠ å¯è§†åŒ–æ ‡è®°\n    allAbnormalDevices.forEach(device => {\n      addAbnormalDeviceMarker(device);\n    });\n  };\n\n  // æ·»åŠ å•ä¸ªå¼‚å¸¸è®¾å¤‡æ ‡è®°\n  const addAbnormalDeviceMarker = device => {\n    const hasError = device.errors.some(e => e.type === 'error');\n    const color = hasError ? '#ff0000' : '#ffa500';\n    const size = hasError ? 1000 : 800;\n\n    // æ·»åŠ åœ†åœˆæ ‡è¯†ï¼ˆé€‚åˆæ‰“å°ï¼‰\n    const circle = new window.AMap.Circle({\n      center: new window.AMap.LngLat(device.location.lng, device.location.lat),\n      radius: size,\n      strokeColor: color,\n      strokeWeight: 4,\n      strokeStyle: hasError ? 'solid' : 'dashed',\n      fillColor: color,\n      fillOpacity: 0.1\n    });\n    circle.setMap(mapInstance.current);\n\n    // æ·»åŠ å¼‚å¸¸æ ‡è®°å›¾æ ‡\n    const marker = new window.AMap.Marker({\n      position: new window.AMap.LngLat(device.location.lng, device.location.lat),\n      icon: new window.AMap.Icon({\n        size: new window.AMap.Size(30, 30),\n        image: createAbnormalIcon(hasError),\n        imageOffset: new window.AMap.Pixel(0, 0),\n        // ä¸åç§»ï¼Œå›¾æ ‡å·¦ä¸Šè§’å¯¹å‡†åæ ‡ç‚¹\n        imageSize: new window.AMap.Size(30, 30)\n      }),\n      title: `${device.name} - ${device.errors.length}ä¸ªå¼‚å¸¸`,\n      zIndex: 1500\n    });\n    marker.setMap(mapInstance.current);\n  };\n\n  // åˆ›å»ºå¼‚å¸¸è®¾å¤‡å›¾æ ‡\n  const createAbnormalIcon = isError => {\n    const color = isError ? '#ff0000' : '#ffa500';\n    const symbol = isError ? '!' : '!'; // ä½¿ç”¨è‹±æ–‡æ„Ÿå¹å·é¿å…ç¼–ç é—®é¢˜\n\n    const svgContent = `<svg width=\"30\" height=\"30\" viewBox=\"0 0 30 30\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n        <circle cx=\"15\" cy=\"15\" r=\"12\" fill=\"${color}\" stroke=\"#fff\" stroke-width=\"2\" opacity=\"0.9\"/>\n        <circle cx=\"15\" cy=\"15\" r=\"8\" fill=\"none\" stroke=\"#fff\" stroke-width=\"1\"/>\n        <text x=\"15\" y=\"20\" text-anchor=\"middle\" font-size=\"14\" fill=\"#fff\" font-weight=\"bold\">${symbol}</text>\n      </svg>`;\n    return `data:image/svg+xml;charset=utf-8,${encodeURIComponent(svgContent)}`;\n  };\n\n  // è®¾å¤‡æ ¡éªŒåŠŸèƒ½\n  const performDeviceValidation = (targetArea = 'all') => {\n    const allDevices = [...powerGridData, ...userGridData];\n    const results = [];\n    allDevices.forEach(device => {\n      if (device.validationErrors && device.validationErrors.length > 0) {\n        results.push({\n          id: device.id,\n          name: device.name,\n          type: device.type,\n          errors: device.validationErrors,\n          location: {\n            lng: device.longitude,\n            lat: device.latitude\n          }\n        });\n      }\n    });\n    setValidationResults(results);\n    setShowValidationPanel(true);\n\n    // åœ¨åœ°å›¾ä¸Šé«˜äº®æ˜¾ç¤ºæœ‰é”™è¯¯çš„è®¾å¤‡\n    highlightValidationErrors(results);\n  };\n\n  // é«˜äº®æ˜¾ç¤ºæ ¡éªŒé”™è¯¯è®¾å¤‡\n  const highlightValidationErrors = results => {\n    results.forEach(result => {\n      const errorLevel = result.errors.some(e => e.type === 'error') ? 'error' : 'warning';\n      const color = errorLevel === 'error' ? '#ff0000' : '#ffa500';\n\n      // æ·»åŠ é™æ€å¼‚å¸¸æ ‡è¯†åœ†åœˆï¼ˆé€‚åˆæ‰“å°ï¼‰\n      const circle = new window.AMap.Circle({\n        center: new window.AMap.LngLat(result.location.lng, result.location.lat),\n        radius: 800,\n        // 800ç±³åŠå¾„\n        strokeColor: color,\n        strokeWeight: 4,\n        strokeStyle: errorLevel === 'error' ? 'solid' : 'dashed',\n        fillColor: color,\n        fillOpacity: 0.15\n      });\n      circle.setMap(mapInstance.current);\n\n      // æ·»åŠ é”™è¯¯æ ‡è®°\n      const errorMarker = new window.AMap.Marker({\n        position: new window.AMap.LngLat(result.location.lng, result.location.lat),\n        icon: new window.AMap.Icon({\n          size: new window.AMap.Size(60, 60),\n          image: createErrorIcon(errorLevel),\n          imageOffset: new window.AMap.Pixel(0, 0),\n          // ä¸åç§»ï¼Œå›¾æ ‡å·¦ä¸Šè§’å¯¹å‡†åæ ‡ç‚¹\n          imageSize: new window.AMap.Size(60, 60)\n        }),\n        title: `${result.name} - ${result.errors.length}ä¸ªé”™è¯¯`,\n        extData: result,\n        zIndex: 1000\n      });\n      errorMarker.on('click', e => {\n        showValidationErrorWindow(e.target);\n      });\n      mapInstance.current.add(errorMarker);\n    });\n  };\n\n  // åˆ›å»ºé”™è¯¯å›¾æ ‡ï¼ˆä¼˜åŒ–æ‰“å°æ•ˆæœï¼‰\n  const createErrorIcon = level => {\n    const color = level === 'error' ? '#ff0000' : '#ffa500';\n    const symbol = level === 'error' ? 'âš ' : '!';\n    const strokePattern = level === 'error' ? '0' : '5,5';\n    const svgContent = `\n      <svg width=\"60\" height=\"60\" xmlns=\"http://www.w3.org/2000/svg\">\n        <circle cx=\"30\" cy=\"30\" r=\"25\" fill=\"${color}\" stroke=\"#000\" stroke-width=\"4\"\n                stroke-dasharray=\"${strokePattern}\" opacity=\"0.9\"/>\n        <circle cx=\"30\" cy=\"30\" r=\"20\" fill=\"none\" stroke=\"#fff\" stroke-width=\"2\"/>\n        <text x=\"30\" y=\"38\" text-anchor=\"middle\" font-size=\"18\" fill=\"#fff\" font-weight=\"bold\">${symbol}</text>\n        <text x=\"30\" y=\"52\" text-anchor=\"middle\" font-size=\"6\" fill=\"#000\" font-weight=\"bold\">å¼‚å¸¸</text>\n      </svg>\n    `;\n    return `data:image/svg+xml;charset=utf-8,${encodeURIComponent(svgContent)}`;\n  };\n\n  // åˆ›å»ºæ ¡éªŒé”™è¯¯è‡ªåŠ¨ä¿¡æ¯çª—å£\n  const createValidationErrorWindow = (result, position) => {\n    const errorLevel = result.errors.some(e => e.type === 'error') ? 'error' : 'warning';\n    const levelText = errorLevel === 'error' ? 'ä¸¥é‡é”™è¯¯' : 'è­¦å‘Š';\n    const levelColor = errorLevel === 'error' ? '#ff0000' : '#ffa500';\n    const content = `\n      <div class=\"amap-info-window-wrapper\" style=\"\n        background: white;\n        border: 1px solid #b8b8b8;\n        border-radius: 3px;\n        box-shadow: 0 2px 6px rgba(0,0,0,0.3);\n        position: relative;\n        font-family: 'Microsoft YaHei', Arial, sans-serif;\n        font-size: 12px;\n        line-height: 1.4;\n        max-width: 400px;\n      \">\n        <!-- é«˜å¾·åœ°å›¾InfoWindowçš„å°ä¸‰è§’ -->\n        <div style=\"\n          position: absolute;\n          bottom: -6px;\n          left: 50%;\n          transform: translateX(-50%);\n          width: 0;\n          height: 0;\n          border-left: 6px solid transparent;\n          border-right: 6px solid transparent;\n          border-top: 6px solid white;\n          z-index: 2;\n        \"></div>\n        <div style=\"\n          position: absolute;\n          bottom: -7px;\n          left: 50%;\n          transform: translateX(-50%);\n          width: 0;\n          height: 0;\n          border-left: 7px solid transparent;\n          border-right: 7px solid transparent;\n          border-top: 7px solid #b8b8b8;\n          z-index: 1;\n        \"></div>\n\n        <!-- æ ¡éªŒé”™è¯¯å†…å®¹ -->\n        <div class=\"info-window validation-error-window\">\n          <h3 style=\"color: ${levelColor}; margin: 0 0 10px 0;\">${result.name}</h3>\n          <p><strong>è®¾å¤‡ç±»å‹:</strong> ${result.type}</p>\n          <p><strong>é”™è¯¯çº§åˆ«:</strong> <span style=\"color: ${levelColor};\">${levelText}</span></p>\n          <p><strong>é”™è¯¯æ•°é‡:</strong> ${result.errors.length}ä¸ª</p>\n          <div style=\"margin-top: 10px;\">\n            <h4 style=\"margin: 5px 0; color: #333;\">é”™è¯¯è¯¦æƒ…:</h4>\n            <ul style=\"margin: 5px 0; padding-left: 20px;\">\n              ${result.errors.map(error => `\n                <li style=\"color: ${error.type === 'error' ? '#ff0000' : '#ffa500'}; margin: 2px 0;\">\n                  ${error.message}\n                </li>\n              `).join('')}\n            </ul>\n          </div>\n        </div>\n      </div>\n    `;\n    const marker = new window.AMap.Marker({\n      position: position,\n      content: content,\n      offset: new window.AMap.Pixel(0, -30),\n      zIndex: 1000\n    });\n    return marker;\n  };\n\n  // è‡ªåŠ¨æ ¡éªŒé”™è¯¯æ˜¾ç¤ºåŠŸèƒ½\n  const openAllValidationErrorPopups = () => {\n    if (!mapInstance.current || !window.AMap) return;\n\n    // å…ˆå…³é—­æ‰€æœ‰ç°æœ‰æ˜¾ç¤º\n    closeAllValidationErrorPopups();\n\n    // è·å–æ‰€æœ‰æœ‰æ ¡éªŒé”™è¯¯çš„è®¾å¤‡\n    const allDevices = [...powerGridData, ...userGridData];\n    const errorDevices = [];\n    allDevices.forEach(device => {\n      if (device.validationErrors && device.validationErrors.length > 0) {\n        errorDevices.push({\n          id: device.id,\n          name: device.name,\n          type: device.type,\n          errors: device.validationErrors,\n          location: {\n            lng: device.longitude,\n            lat: device.latitude\n          }\n        });\n      }\n    });\n    console.log('=== è‡ªåŠ¨æ ¡éªŒé”™è¯¯åŠŸèƒ½è°ƒè¯• ===');\n    console.log('æ‰¾åˆ°çš„é”™è¯¯è®¾å¤‡:', errorDevices.map(device => ({\n      id: device.id,\n      name: device.name,\n      errorCount: device.errors.length\n    })));\n    let successCount = 0;\n    errorDevices.forEach(device => {\n      console.log(`åˆ›å»ºé”™è¯¯ä¿¡æ¯çª—å£: ${device.name} (${device.errors.length}ä¸ªé”™è¯¯)`);\n      const position = new window.AMap.LngLat(device.location.lng, device.location.lat);\n      const errorMarker = createValidationErrorWindow(device, position);\n      errorMarker.setMap(mapInstance.current);\n      validationPopups.current.push(errorMarker);\n      successCount++;\n      console.log(`âœ“ æ ¡éªŒé”™è¯¯InfoWindowå·²åˆ›å»º: ${device.name}`);\n    });\n    console.log(`æ€»å…±æˆåŠŸåˆ›å»ºäº† ${successCount} ä¸ªæ ¡éªŒé”™è¯¯InfoWindow`);\n    console.log('=== è°ƒè¯•ç»“æŸ ===');\n  };\n\n  // å…³é—­æ‰€æœ‰æ ¡éªŒé”™è¯¯è‡ªåŠ¨æ˜¾ç¤º\n  const closeAllValidationErrorPopups = () => {\n    validationPopups.current.forEach(errorMarker => {\n      try {\n        errorMarker.setMap(null);\n      } catch (e) {\n        // å¿½ç•¥å…³é—­é”™è¯¯\n      }\n    });\n    validationPopups.current = [];\n    console.log('æ‰€æœ‰æ ¡éªŒé”™è¯¯InfoWindowå·²å…³é—­');\n  };\n  const addPointMarker = item => {\n    // åˆ›å»ºè‡ªå®šä¹‰å›¾æ ‡\n    const icon = new window.AMap.Icon({\n      size: new window.AMap.Size(40, 40),\n      image: getIconByType(item.type),\n      imageOffset: new window.AMap.Pixel(0, 0),\n      // ä¸åç§»ï¼Œå›¾æ ‡å·¦ä¸Šè§’å¯¹å‡†åæ ‡ç‚¹\n      imageSize: new window.AMap.Size(40, 40)\n    });\n\n    // åˆ›å»ºæ ‡è®°ç‚¹\n    const marker = new window.AMap.Marker({\n      position: new window.AMap.LngLat(item.longitude, item.latitude),\n      icon: icon,\n      title: item.name,\n      extData: item\n    });\n\n    // æ·»åŠ ç‚¹å‡»äº‹ä»¶\n    marker.on('click', e => {\n      showInfoWindow(e.target);\n    });\n\n    // å°†æ ‡è®°æ·»åŠ åˆ°åœ°å›¾\n    mapInstance.current.add(marker);\n  };\n\n  // æ·»åŠ ç”¨æˆ·è¡¨ç®±æ ‡è®°\n  const addUserMarker = item => {\n    var _item$meterLayout, _item$meterLayout$met;\n    // æ£€æŸ¥æ˜¯å¦æœ‰å¼‚å¸¸è¡¨è®¡\n    const abnormalMeters = ((_item$meterLayout = item.meterLayout) === null || _item$meterLayout === void 0 ? void 0 : (_item$meterLayout$met = _item$meterLayout.meters) === null || _item$meterLayout$met === void 0 ? void 0 : _item$meterLayout$met.filter(m => m.status !== 'æ­£å¸¸')) || [];\n    const hasAbnormalMeters = abnormalMeters.length > 0;\n\n    // åˆ›å»ºè¡¨ç®±å›¾æ ‡ - å¼‚å¸¸è¡¨ç®±æ˜¾ç¤ºçº¢è‰²ï¼Œæ­£å¸¸è¡¨ç®±æ˜¾ç¤ºè“è‰²ï¼Œæ˜¾ç¤º\"è¡¨ç®±\"æ–‡å­—\n    const createMeterBoxIcon = isAbnormal => {\n      const color = isAbnormal ? '#ff0000' : '#0066ff';\n      const textColor = '#ffffff';\n\n      // ä½¿ç”¨ç®€å•çš„çŸ©å½¢å›¾æ ‡ï¼Œé¿å…å¤æ‚çš„SVGç¼–ç \n      const svgContent = `<svg width=\"50\" height=\"35\" viewBox=\"0 0 50 35\" xmlns=\"http://www.w3.org/2000/svg\">\n          <rect x=\"1\" y=\"1\" width=\"48\" height=\"33\" rx=\"4\" fill=\"${color}\" stroke=\"#fff\" stroke-width=\"2\"/>\n          <text x=\"25\" y=\"22\" text-anchor=\"middle\" font-size=\"12\" fill=\"${textColor}\" font-family=\"Arial, sans-serif\" font-weight=\"bold\">è¡¨ç®±</text>\n        </svg>`;\n      return `data:image/svg+xml;charset=utf-8,${encodeURIComponent(svgContent)}`;\n    };\n    const icon = new window.AMap.Icon({\n      size: new window.AMap.Size(50, 35),\n      image: createMeterBoxIcon(hasAbnormalMeters),\n      imageOffset: new window.AMap.Pixel(0, 0),\n      // ä¸åç§»ï¼Œå›¾æ ‡å·¦ä¸Šè§’å¯¹å‡†åæ ‡ç‚¹\n      imageSize: new window.AMap.Size(50, 35)\n    });\n    const marker = new window.AMap.Marker({\n      position: new window.AMap.LngLat(item.longitude, item.latitude),\n      icon: icon,\n      title: item.name + (hasAbnormalMeters ? ` (${abnormalMeters.length}ä¸ªå¼‚å¸¸è¡¨è®¡)` : ''),\n      extData: item\n    });\n\n    // å¦‚æœæœ‰å¼‚å¸¸è¡¨è®¡ï¼Œæ·»åŠ è½»å¾®çš„é—ªçƒæ•ˆæœ\n    if (hasAbnormalMeters) {\n      marker.setAnimation('AMAP_ANIMATION_DROP');\n    }\n    marker.on('click', e => {\n      showUserInfoWindow(e.target);\n    });\n    mapInstance.current.add(marker);\n  };\n  const addTransmissionLine = lineData => {\n    // åˆ›å»ºçº¿è·¯è·¯å¾„\n    const path = [[lineData.startPoint.longitude, lineData.startPoint.latitude], [lineData.endPoint.longitude, lineData.endPoint.latitude]];\n\n    // æ ¹æ®çŠ¶æ€è®¾ç½®çº¿è·¯é¢œè‰²\n    const getLineColor = status => {\n      switch (status) {\n        case 'æ­£å¸¸':\n          return '#00ff00';\n        case 'æ•…éšœ':\n          return '#ff0000';\n        case 'ç»´æŠ¤':\n          return '#ffa500';\n        case 'åœè¿':\n          return '#808080';\n        default:\n          return '#0066ff';\n      }\n    };\n\n    // åˆ›å»ºçº¿è·¯\n    const polyline = new window.AMap.Polyline({\n      path: path,\n      strokeColor: getLineColor(lineData.status),\n      strokeWeight: 6,\n      strokeOpacity: 0.8,\n      strokeStyle: lineData.status === 'æ•…éšœ' ? 'dashed' : 'solid',\n      extData: lineData\n    });\n\n    // æ·»åŠ ç‚¹å‡»äº‹ä»¶\n    polyline.on('click', e => {\n      showLineInfoWindow(e.target, e.lnglat);\n    });\n\n    // å°†çº¿è·¯æ·»åŠ åˆ°åœ°å›¾\n    mapInstance.current.add(polyline);\n\n    // åœ¨çº¿è·¯ä¸­ç‚¹æ·»åŠ æ ‡è¯†\n    const midLat = (lineData.startPoint.latitude + lineData.endPoint.latitude) / 2;\n    const midLng = (lineData.startPoint.longitude + lineData.endPoint.longitude) / 2;\n    const lineMarker = new window.AMap.Marker({\n      position: new window.AMap.LngLat(midLng, midLat),\n      icon: new window.AMap.Icon({\n        size: new window.AMap.Size(30, 30),\n        image: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAiIGhlaWdodD0iMzAiIHZpZXdCb3g9IjAgMCAzMCAzMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTUiIGN5PSIxNSIgcj0iMTIiIGZpbGw9IiNmZjMzMDAiIHN0cm9rZT0iI2ZmZiIgc3Ryb2tlLXdpZHRoPSIyIi8+CjxwYXRoIGQ9Ik04IDE1aDE0IiBzdHJva2U9IiNmZmYiIHN0cm9rZS13aWR0aD0iMyIvPgo8L3N2Zz4=',\n        imageOffset: new window.AMap.Pixel(0, 0),\n        // ä¸åç§»ï¼Œå›¾æ ‡å·¦ä¸Šè§’å¯¹å‡†åæ ‡ç‚¹\n        imageSize: new window.AMap.Size(30, 30)\n      }),\n      title: lineData.name,\n      extData: lineData\n    });\n    lineMarker.on('click', e => {\n      showLineInfoWindow(e.target, e.target.getPosition());\n    });\n    mapInstance.current.add(lineMarker);\n  };\n  const getIconByType = type => {\n    const iconMap = {\n      'å‘ç”µå‚': 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCA0MCA0MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMjAiIGN5PSIyMCIgcj0iMTgiIGZpbGw9IiNmZjY2MDAiIHN0cm9rZT0iI2ZmZiIgc3Ryb2tlLXdpZHRoPSIyIi8+CjxwYXRoIGQ9Ik0xMiAxNmw0IDRsLTQgNGw0IDRsLTQgNGg4djRoNHYtNGg0bC00LTRsNC00bC00LTRsNC00aC00di00aC00djRoLTRsMCA0eiIgZmlsbD0iI2ZmZiIvPgo8L3N2Zz4=',\n      'å˜ç”µç«™': 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCA0MCA0MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMjAiIGN5PSIyMCIgcj0iMTgiIGZpbGw9IiMwMDY2ZmYiIHN0cm9rZT0iI2ZmZiIgc3Ryb2tlLXdpZHRoPSIyIi8+CjxyZWN0IHg9IjE0IiB5PSIxMCIgd2lkdGg9IjEyIiBoZWlnaHQ9IjgiIGZpbGw9IiNmZmYiLz4KPHJlY3QgeD0iMTQiIHk9IjIyIiB3aWR0aD0iMTIiIGhlaWdodD0iOCIgZmlsbD0iI2ZmZiIvPgo8bGluZSB4MT0iMTQiIHkxPSIxOCIgeDI9IjI2IiB5Mj0iMTgiIHN0cm9rZT0iI2ZmZiIgc3Ryb2tlLXdpZHRoPSIyIi8+CjxsaW5lIHgxPSIxNCIgeTE9IjIyIiB4Mj0iMjYiIHkyPSIyMiIgc3Ryb2tlPSIjZmZmIiBzdHJva2Utd2lkdGg9IjIiLz4KPC9zdmc+',\n      'è¾“ç”µçº¿è·¯': 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCA0MCA0MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMjAiIGN5PSIyMCIgcj0iMTgiIGZpbGw9IiNmZjMzMDAiIHN0cm9rZT0iI2ZmZiIgc3Ryb2tlLXdpZHRoPSIyIi8+CjxwYXRoIGQ9Ik0xMCAyMGw2LTZsNiA2bDYtNiIgc3Ryb2tlPSIjZmZmIiBzdHJva2Utd2lkdGg9IjIiIGZpbGw9Im5vbmUiLz4KPHBhdGggZD0iTTEwIDI2bDYtNmw2IDZsNi02IiBzdHJva2U9IiNmZmYiIHN0cm9rZS13aWR0aD0iMiIgZmlsbD0ibm9uZSIvPgo8L3N2Zz4='\n    };\n    return iconMap[type] || iconMap['å‘ç”µå‚'];\n  };\n  const showInfoWindow = marker => {\n    const data = marker.getExtData();\n    const infoWindow = new window.AMap.InfoWindow({\n      content: `\n        <div class=\"info-window\">\n          <h3>${data.name}</h3>\n          <p><strong>ç±»å‹:</strong> ${data.type}</p>\n          <p><strong>å®¹é‡:</strong> ${data.capacity}</p>\n          <p><strong>çŠ¶æ€:</strong> <span class=\"status ${data.status}\">${data.status}</span></p>\n          <p><strong>è´Ÿè·:</strong> ${data.load}</p>\n          <p><strong>ä½ç½®:</strong> ${data.address}</p>\n        </div>\n      `,\n      offset: new window.AMap.Pixel(0, -30)\n    });\n    infoWindow.open(mapInstance.current, marker.getPosition());\n  };\n  const showLineInfoWindow = (lineOrMarker, position) => {\n    const data = lineOrMarker.getExtData();\n    const lineDetails = data.lineDetails || {};\n    const infoWindow = new window.AMap.InfoWindow({\n      content: `\n        <div class=\"info-window\">\n          <h3>${data.name}</h3>\n          <p><strong>ç±»å‹:</strong> ${data.type}</p>\n          <p><strong>å®¹é‡:</strong> ${data.capacity}</p>\n          <p><strong>çŠ¶æ€:</strong> <span class=\"status ${data.status}\">${data.status}</span></p>\n          <p><strong>è´Ÿè·:</strong> ${data.load}</p>\n          <p><strong>èµ·ç‚¹:</strong> ${data.startPoint.name}</p>\n          <p><strong>ç»ˆç‚¹:</strong> ${data.endPoint.name}</p>\n          <p><strong>å¯¼çº¿å‹å·:</strong> ${lineDetails.wireType || 'N/A'}</p>\n          <p><strong>çº¿å¾„:</strong> ${lineDetails.diameter || 'N/A'}</p>\n          <p><strong>æ•·è®¾é•¿åº¦:</strong> ${lineDetails.length || 'N/A'}</p>\n          <p><strong>ä½ç½®:</strong> ${data.address}</p>\n        </div>\n      `,\n      offset: new window.AMap.Pixel(0, -30)\n    });\n    infoWindow.open(mapInstance.current, position);\n  };\n\n  // æ˜¾ç¤ºç”¨æˆ·ä¿¡æ¯çª—å£\n  const showUserInfoWindow = marker => {\n    const data = marker.getExtData();\n    const voltage = data.voltageData || {};\n    const infoWindow = new window.AMap.InfoWindow({\n      content: `\n        <div class=\"info-window meter-box-window\">\n          <h3>${data.name}</h3>\n          <p><strong>ç±»å‹:</strong> ${data.type}</p>\n          <p><strong>ç”µå‹:</strong> ${voltage.current || 'N/A'}V (${voltage.status || 'N/A'})</p>\n          <p><strong>ä½ç½®:</strong> ${data.address}</p>\n          <div class=\"meter-layout-container\">\n            <h4>è¡¨ç®±å†…éƒ¨å¸ƒå±€</h4>\n            ${generateMeterLayoutHtml(data.meterLayout)}\n          </div>\n        </div>\n      `,\n      offset: new window.AMap.Pixel(0, -30)\n    });\n    infoWindow.open(mapInstance.current, marker.getPosition());\n  };\n\n  // ç”Ÿæˆè¡¨ç®±å†…éƒ¨å¸ƒå±€HTML\n  const generateMeterLayoutHtml = meterLayout => {\n    if (!meterLayout || !meterLayout.meters) {\n      return '<p>æš‚æ— å¸ƒå±€ä¿¡æ¯</p>';\n    }\n    const meters = meterLayout.meters;\n    const totalMeters = meterLayout.totalMeters || meters.length;\n\n    // ä½¿ç”¨3åˆ—ç½‘æ ¼å¸ƒå±€\n\n    let layoutHtml = '<div class=\"meter-grid\">';\n    for (let i = 0; i < totalMeters; i++) {\n      const meter = meters[i];\n      if (meter) {\n        const statusClass = getStatusClass(meter.status);\n        const paymentClass = meter.paymentStatus === 'æ¬ è´¹' ? 'owing' : '';\n        const powerTypeClass = getPowerTypeClass(meter.powerType);\n        layoutHtml += `\n          <div class=\"meter-slot ${statusClass} ${paymentClass} ${powerTypeClass}\"\n               title=\"${meter.householder} - ${meter.status} - ${meter.powerType} - ${meter.userType}\">\n            <div class=\"meter-id\">${meter.id}</div>\n            <div class=\"meter-user\">${meter.householder}</div>\n            <div class=\"meter-type\">${meter.userType}</div>\n            <div class=\"meter-power-type\">${meter.powerType}</div>\n            <div class=\"meter-voltage\">${meter.voltage}V</div>\n            <div class=\"meter-status\">${meter.status}</div>\n            ${meter.paymentStatus === 'æ¬ è´¹' ? `<div class=\"owing-amount\">æ¬ è´¹: Â¥${meter.owingAmount}</div>` : ''}\n          </div>\n        `;\n      } else {\n        layoutHtml += '<div class=\"meter-slot empty\">ç©ºä½</div>';\n      }\n    }\n    layoutHtml += '</div>';\n    return layoutHtml;\n  };\n\n  // è·å–çŠ¶æ€æ ·å¼ç±»\n  const getStatusClass = status => {\n    switch (status) {\n      case 'æ­£å¸¸':\n        return 'normal';\n      case 'é€šä¿¡æ•…éšœ':\n        return 'comm-error';\n      case 'ç”µå‹å¼‚å¸¸':\n        return 'voltage-error';\n      case 'æ•°æ®é”™è¯¯':\n        return 'data-error';\n      default:\n        return 'unknown';\n    }\n  };\n\n  // è·å–ç”¨ç”µç±»å‹æ ·å¼ç±»\n  const getPowerTypeClass = powerType => {\n    switch (powerType) {\n      case 'Aç›¸':\n        return 'phase-a';\n      case 'Bç›¸':\n        return 'phase-b';\n      case 'Cç›¸':\n        return 'phase-c';\n      default:\n        return '';\n    }\n  };\n\n  // å®šä½å¼‚å¸¸è¡¨è®¡\n  const locateAbnormalMeter = meterId => {\n    // æŸ¥æ‰¾åŒ…å«è¯¥è¡¨è®¡çš„è¡¨ç®±\n    const meterBox = userGridData.find(box => {\n      var _box$meterLayout2, _box$meterLayout2$met;\n      return (_box$meterLayout2 = box.meterLayout) === null || _box$meterLayout2 === void 0 ? void 0 : (_box$meterLayout2$met = _box$meterLayout2.meters) === null || _box$meterLayout2$met === void 0 ? void 0 : _box$meterLayout2$met.some(meter => meter.id === meterId);\n    });\n    if (meterBox && mapInstance.current) {\n      // å®šä½åˆ°è¡¨ç®±ä½ç½®\n      const position = new window.AMap.LngLat(meterBox.longitude, meterBox.latitude);\n      mapInstance.current.setCenter(position);\n      mapInstance.current.setZoom(16);\n\n      // é«˜äº®æ˜¾ç¤ºè¯¥è¡¨ç®±\n      const highlightMarker = new window.AMap.Marker({\n        position: position,\n        icon: new window.AMap.Icon({\n          size: new window.AMap.Size(80, 80),\n          image: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iODAiIHZpZXdCb3g9IjAgMCA4MCA4MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iNDAiIGN5PSI0MCIgcj0iMzUiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2ZmMDAwMCIgc3Ryb2tlLXdpZHRoPSI0IiBzdHJva2UtZGFzaGFycmF5PSI1LDUiPgogIDxhbmltYXRlIGF0dHJpYnV0ZU5hbWU9InIiIHZhbHVlcz0iMzU7NDU7MzUiIGR1cj0iMnMiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIi8+CiAgPGFuaW1hdGUgYXR0cmlidXRlTmFtZT0ic3Ryb2tlLW9wYWNpdHkiIHZhbHVlcz0iMTswLjM7MSIgZHVyPSIycyIgcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiLz4KPC9jaXJjbGU+Cjwvc3ZnPg==',\n          imageOffset: new window.AMap.Pixel(-40, -40)\n        }),\n        zIndex: 2000\n      });\n      mapInstance.current.add(highlightMarker);\n\n      // 3ç§’åç§»é™¤é«˜äº®æ ‡è®°\n      setTimeout(() => {\n        mapInstance.current.remove(highlightMarker);\n      }, 3000);\n\n      // å…³é—­å¼‚å¸¸è¡¨è®¡é¢æ¿\n      setShowAbnormalList(false);\n\n      // æ˜¾ç¤ºè¡¨ç®±ä¿¡æ¯\n      setTimeout(() => {\n        const boxMarker = mapInstance.current.getAllOverlays('marker').find(marker => {\n          var _marker$getExtData;\n          return ((_marker$getExtData = marker.getExtData()) === null || _marker$getExtData === void 0 ? void 0 : _marker$getExtData.id) === meterBox.id;\n        });\n        if (boxMarker) {\n          showUserInfoWindow(boxMarker);\n        }\n      }, 500);\n    }\n  };\n\n  // å®šä½è®¾å¤‡æ ¡éªŒé”™è¯¯\n  const locateValidationError = (_, location) => {\n    if (mapInstance.current && location) {\n      // ç§»åŠ¨åœ°å›¾åˆ°è®¾å¤‡ä½ç½®\n      const position = new window.AMap.LngLat(location.lng, location.lat);\n      mapInstance.current.setCenter(position);\n      mapInstance.current.setZoom(15);\n\n      // æ·»åŠ é—ªçƒåŠ¨ç”»æ ‡è®°\n      const highlightMarker = new window.AMap.Marker({\n        position: position,\n        icon: new window.AMap.Icon({\n          size: new window.AMap.Size(100, 100),\n          image: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgdmlld0JveD0iMCAwIDEwMCAxMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxjaXJjbGUgY3g9IjUwIiBjeT0iNTAiIHI9IjQ1IiBmaWxsPSJub25lIiBzdHJva2U9IiNmZjAwMDAiIHN0cm9rZS13aWR0aD0iNiIgc3Ryb2tlLWRhc2hhcnJheT0iMTAsMTAiPgogIDxhbmltYXRlIGF0dHJpYnV0ZU5hbWU9InIiIHZhbHVlcz0iNDU7NjA7NDUiIGR1cj0iMnMiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIi8+CiAgPGFuaW1hdGUgYXR0cmlidXRlTmFtZT0ic3Ryb2tlLW9wYWNpdHkiIHZhbHVlcz0iMTswLjI7MSIgZHVyPSIycyIgcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiLz4KPC9jaXJjbGU+CjxjaXJjbGUgY3g9IjUwIiBjeT0iNTAiIHI9IjIwIiBmaWxsPSIjZmYwMDAwIiBvcGFjaXR5PSIwLjgiLz4KPHN2ZyB4PSI0MCIgeT0iNDAiIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCI+Cjx0ZXh0IHg9IjEwIiB5PSIxNSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZm9udC1zaXplPSIxNiIgZmlsbD0iI2ZmZiIgZm9udC13ZWlnaHQ9ImJvbGQiPuKaoTwvdGV4dD4KPC9zdmc+Cjwvc3ZnPg==',\n          imageOffset: new window.AMap.Pixel(-50, -50)\n        }),\n        zIndex: 2000\n      });\n      mapInstance.current.add(highlightMarker);\n\n      // 5ç§’åç§»é™¤æ ‡è®°\n      setTimeout(() => {\n        mapInstance.current.remove(highlightMarker);\n      }, 5000);\n\n      // å…³é—­æ ¡éªŒé¢æ¿\n      setShowValidationPanel(false);\n    }\n  };\n\n  // æ˜¾ç¤ºæ ¡éªŒé”™è¯¯ä¿¡æ¯çª—å£\n  const showValidationErrorWindow = marker => {\n    const data = marker.getExtData();\n    const errorsHtml = data.errors.map(error => `\n      <div class=\"error-item ${error.type}\">\n        <span class=\"error-type\">${error.type === 'error' ? 'é”™è¯¯' : 'è­¦å‘Š'}</span>\n        <span class=\"error-message\">${error.message}</span>\n        <span class=\"error-field\">(${error.field})</span>\n      </div>\n    `).join('');\n    const infoWindow = new window.AMap.InfoWindow({\n      content: `\n        <div class=\"info-window validation-error\">\n          <h3>âš ï¸ ${data.name}</h3>\n          <p><strong>è®¾å¤‡ç±»å‹:</strong> ${data.type}</p>\n          <p><strong>å‘ç°é—®é¢˜:</strong> ${data.errors.length}ä¸ª</p>\n          <div class=\"error-list\">${errorsHtml}</div>\n          <button onclick=\"fixValidationError('${data.id}')\" class=\"btn-fix\">ä¿®å¤é—®é¢˜</button>\n        </div>\n      `,\n      offset: new window.AMap.Pixel(0, -30)\n    });\n    infoWindow.open(mapInstance.current, new window.AMap.LngLat(data.location.lng, data.location.lat));\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"map-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"map-controls\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"legend\",\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          children: \"\\u56FE\\u4F8B\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1128,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"legend-item\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"legend-icon power-plant\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1130,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"\\u53D1\\u7535\\u5382\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1131,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1129,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"legend-item\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"legend-icon substation\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1134,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"\\u53D8\\u7535\\u7AD9\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1135,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1133,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"legend-item\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"legend-icon transmission\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1138,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"\\u8F93\\u7535\\u7EBF\\u8DEF\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1139,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1137,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"legend-item\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"legend-icon meter-box\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1142,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"\\u8868\\u7BB1\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1143,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1141,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1127,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"control-panel\",\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          children: \"\\u8BBE\\u5907\\u7BA1\\u7406\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1148,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"control-btn validation-btn\",\n          onClick: () => performDeviceValidation(),\n          children: \"\\uD83D\\uDCCB \\u8BBE\\u5907\\u6821\\u9A8C\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1149,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: `control-btn ${autoValidationMode ? 'active' : ''}`,\n          onClick: () => {\n            const newMode = !autoValidationMode;\n            setAutoValidationMode(newMode);\n            if (newMode) {\n              openAllValidationErrorPopups();\n            } else {\n              closeAllValidationErrorPopups();\n            }\n          },\n          children: autoValidationMode ? 'ğŸ”“ è‡ªåŠ¨æ ¡éªŒ' : 'ğŸ”’ è‡ªåŠ¨æ ¡éªŒ'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1155,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"control-btn\",\n          onClick: () => setShowAbnormalList(true),\n          children: \"\\u26A0\\uFE0F \\u5F02\\u5E38\\u8868\\u8BA1\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1169,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"control-btn\",\n          onClick: () => setShowLossAnalysis(true),\n          children: \"\\uD83D\\uDCCA \\u7EBF\\u635F\\u5206\\u6790\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1175,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"control-btn\",\n          onClick: () => setShowLoadMonitor(true),\n          children: \"\\uD83D\\uDCC8 \\u8D1F\\u8377\\u76D1\\u63A7\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1181,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"control-btn\",\n          onClick: () => setShowMeterBoxes(!showMeterBoxes),\n          children: \"\\uD83D\\uDCE6 \\u8868\\u7BB1\\u5C55\\u793A\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1187,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: `control-btn ${autoMeterBoxMode ? 'active' : ''}`,\n          onClick: () => {\n            const newMode = !autoMeterBoxMode;\n            setAutoMeterBoxMode(newMode);\n            // å¦‚æœå…³é—­è‡ªåŠ¨æ¨¡å¼ï¼Œç«‹å³å…³é—­æ‰€æœ‰å¼¹çª—\n            if (!newMode) {\n              closeAllMeterBoxPopups();\n            }\n          },\n          children: autoMeterBoxMode ? 'ğŸ”“ è‡ªåŠ¨è¡¨ç®±' : 'ğŸ”’ è‡ªåŠ¨è¡¨ç®±'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1193,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"control-btn\",\n          onClick: () => window.print(),\n          children: \"\\uD83D\\uDDA8\\uFE0F \\u6253\\u5370\\u5730\\u56FE\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1206,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1147,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1126,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      ref: mapRef,\n      className: \"map\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1215,\n      columnNumber: 7\n    }, this), showValidationPanel && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"validation-panel\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"panel-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"\\uD83D\\uDCCB \\u8BBE\\u5907\\u6821\\u9A8C\\u7ED3\\u679C\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1221,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setShowValidationPanel(false),\n          children: \"\\u2715\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1222,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1220,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"panel-content\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"\\u53D1\\u73B0 \", validationResults.length, \" \\u4E2A\\u8BBE\\u5907\\u5B58\\u5728\\u95EE\\u9898\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1225,\n          columnNumber: 13\n        }, this), validationResults.map(result => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"validation-item\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"item-header\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"device-name\",\n              children: result.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1229,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"device-type\",\n              children: result.type\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1230,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1228,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"error-count\",\n            children: [result.errors.length, \" \\u4E2A\\u95EE\\u9898\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1232,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"error-summary\",\n            children: result.errors.map((error, index) => /*#__PURE__*/_jsxDEV(\"span\", {\n              className: `error-tag ${error.type}`,\n              children: error.message\n            }, index, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1237,\n              columnNumber: 21\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1235,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"validation-actions\",\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"locate-btn\",\n              onClick: () => locateValidationError(result.id, result.location),\n              children: \"\\uD83D\\uDCCD \\u5B9A\\u4F4D\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1243,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1242,\n            columnNumber: 17\n          }, this)]\n        }, result.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1227,\n          columnNumber: 15\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1224,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1219,\n      columnNumber: 9\n    }, this), showAbnormalList && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"abnormal-panel\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"panel-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"\\u26A0\\uFE0F \\u5F02\\u5E38\\u8868\\u8BA1\\u6E05\\u5355\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1260,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setShowAbnormalList(false),\n          children: \"\\u2715\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1261,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1259,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"panel-content\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"abnormal-list\",\n          children: abnormalMeters.map(meter => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"abnormal-item\",\n            onClick: () => locateAbnormalMeter(meter.id),\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"meter-info\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"meter-id\",\n                children: meter.id\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1268,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"householder\",\n                children: meter.householder\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1269,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1267,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"meter-details\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"address\",\n                children: meter.address\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1272,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: `status ${meter.type}`,\n                children: meter.type\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1273,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1271,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"last-online\",\n              children: [\"\\u6700\\u540E\\u4E0A\\u7EBF: \", meter.lastOnline]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1275,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"locate-btn\",\n              children: \"\\uD83D\\uDCCD \\u70B9\\u51FB\\u5B9A\\u4F4D\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1278,\n              columnNumber: 19\n            }, this)]\n          }, meter.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1266,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1264,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1263,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1258,\n      columnNumber: 9\n    }, this), showLossAnalysis && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"loss-analysis-panel\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"panel-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"\\uD83D\\uDCCA \\u53F0\\u533A\\u7EBF\\u635F\\u5206\\u6790\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1292,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"chart-controls\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: `chart-type-btn ${lossChartType === 'bar' ? 'active' : ''}`,\n            onClick: () => setLossChartType('bar'),\n            children: \"\\uD83D\\uDCCA \\u67F1\\u72B6\\u56FE\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1294,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: `chart-type-btn ${lossChartType === 'line' ? 'active' : ''}`,\n            onClick: () => setLossChartType('line'),\n            children: \"\\uD83D\\uDCC8 \\u6298\\u7EBF\\u56FE\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1300,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1293,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setShowLossAnalysis(false),\n          children: \"\\u2715\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1307,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1291,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"panel-content\",\n        children: areaLossData.map(area => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"loss-chart\",\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            children: area.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1312,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"chart-container\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"chart-legend\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"legend-theoretical\",\n                children: \"\\u7406\\u8BBA\\u7EBF\\u635F\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1315,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"legend-actual\",\n                children: \"\\u5B9E\\u9645\\u7EBF\\u635F\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1316,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1314,\n              columnNumber: 19\n            }, this), lossChartType === 'bar' ? /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"chart-data\",\n              children: area.dates.map((date, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"chart-bar\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"bar-group\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"bar theoretical\",\n                    style: {\n                      height: `${area.theoreticalLoss[index] * 20}px`\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1323,\n                    columnNumber: 29\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"bar actual\",\n                    style: {\n                      height: `${area.actualLoss[index] * 20}px`\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1327,\n                    columnNumber: 29\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1322,\n                  columnNumber: 27\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"bar-label\",\n                  children: date.slice(-2)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1332,\n                  columnNumber: 27\n                }, this)]\n              }, index, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1321,\n                columnNumber: 25\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1319,\n              columnNumber: 21\n            }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"line-chart\",\n              children: /*#__PURE__*/_jsxDEV(\"svg\", {\n                width: \"100%\",\n                height: \"200\",\n                viewBox: \"0 0 400 200\",\n                children: [/*#__PURE__*/_jsxDEV(\"defs\", {\n                  children: /*#__PURE__*/_jsxDEV(\"pattern\", {\n                    id: \"grid\",\n                    width: \"40\",\n                    height: \"20\",\n                    patternUnits: \"userSpaceOnUse\",\n                    children: /*#__PURE__*/_jsxDEV(\"path\", {\n                      d: \"M 40 0 L 0 0 0 20\",\n                      fill: \"none\",\n                      stroke: \"#e0e0e0\",\n                      strokeWidth: \"1\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1342,\n                      columnNumber: 29\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1341,\n                    columnNumber: 27\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1340,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"rect\", {\n                  width: \"100%\",\n                  height: \"100%\",\n                  fill: \"url(#grid)\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1345,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"polyline\", {\n                  fill: \"none\",\n                  stroke: \"#3498db\",\n                  strokeWidth: \"2\",\n                  points: area.theoreticalLoss.map((loss, index) => `${index * 40 + 20},${180 - loss * 20}`).join(' ')\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1348,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"polyline\", {\n                  fill: \"none\",\n                  stroke: \"#e74c3c\",\n                  strokeWidth: \"2\",\n                  points: area.actualLoss.map((loss, index) => `${index * 40 + 20},${180 - loss * 20}`).join(' ')\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1358,\n                  columnNumber: 25\n                }, this), area.theoreticalLoss.map((loss, index) => /*#__PURE__*/_jsxDEV(\"circle\", {\n                  cx: index * 40 + 20,\n                  cy: 180 - loss * 20,\n                  r: \"3\",\n                  fill: \"#3498db\"\n                }, `theoretical-${index}`, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1369,\n                  columnNumber: 27\n                }, this)), area.actualLoss.map((loss, index) => /*#__PURE__*/_jsxDEV(\"circle\", {\n                  cx: index * 40 + 20,\n                  cy: 180 - loss * 20,\n                  r: \"3\",\n                  fill: \"#e74c3c\"\n                }, `actual-${index}`, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1378,\n                  columnNumber: 27\n                }, this)), area.dates.map((date, index) => /*#__PURE__*/_jsxDEV(\"text\", {\n                  x: index * 40 + 20,\n                  y: \"195\",\n                  textAnchor: \"middle\",\n                  fontSize: \"10\",\n                  fill: \"#666\",\n                  children: date.slice(-2)\n                }, index, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1389,\n                  columnNumber: 27\n                }, this))]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1338,\n                columnNumber: 23\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1337,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1313,\n            columnNumber: 17\n          }, this)]\n        }, area.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1311,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1309,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1290,\n      columnNumber: 9\n    }, this), showLoadMonitor && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"load-monitor-panel\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"panel-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"\\uD83D\\uDCC8 \\u53D8\\u7535\\u7AD9\\u8D1F\\u8377\\u76D1\\u63A7\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1414,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setShowLoadMonitor(false),\n          children: \"\\u2715\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1415,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1413,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"panel-content\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"station-selector\",\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            children: \"\\u9009\\u62E9\\u53D8\\u7535\\u7AD9\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1419,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"station-list\",\n            children: powerGridData.filter(item => item.type === 'å˜ç”µç«™').map(station => {\n              var _station$loadData;\n              return /*#__PURE__*/_jsxDEV(\"div\", {\n                className: `station-item ${(selectedStation === null || selectedStation === void 0 ? void 0 : selectedStation.id) === station.id ? 'selected' : ''}`,\n                onClick: () => setSelectedStation(station),\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"station-name\",\n                  children: station.name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1427,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"station-load\",\n                  children: [\"\\u5F53\\u524D\\u8D1F\\u8377: \", ((_station$loadData = station.loadData) === null || _station$loadData === void 0 ? void 0 : _station$loadData.current) || 0, \"MW\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1428,\n                  columnNumber: 21\n                }, this)]\n              }, station.id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1422,\n                columnNumber: 19\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1420,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1418,\n          columnNumber: 13\n        }, this), selectedStation && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"load-chart-container\",\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            children: [selectedStation.name, \" - \\u8D1F\\u8377\\u53D8\\u5316\\u8D8B\\u52BF\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1436,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"load-chart\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"chart-y-axis\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"200MW\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1439,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"150MW\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1440,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"100MW\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1441,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"50MW\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1442,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"0MW\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1443,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1438,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"chart-area\",\n              children: /*#__PURE__*/_jsxDEV(\"svg\", {\n                width: \"300\",\n                height: \"150\",\n                viewBox: \"0 0 300 150\",\n                children: [/*#__PURE__*/_jsxDEV(\"defs\", {\n                  children: /*#__PURE__*/_jsxDEV(\"pattern\", {\n                    id: \"grid\",\n                    width: \"60\",\n                    height: \"30\",\n                    patternUnits: \"userSpaceOnUse\",\n                    children: /*#__PURE__*/_jsxDEV(\"path\", {\n                      d: \"M 60 0 L 0 0 0 30\",\n                      fill: \"none\",\n                      stroke: \"#ecf0f1\",\n                      strokeWidth: \"1\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 1450,\n                      columnNumber: 27\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1449,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1448,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"rect\", {\n                  width: \"100%\",\n                  height: \"100%\",\n                  fill: \"url(#grid)\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1453,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"polyline\", {\n                  fill: \"none\",\n                  stroke: \"#3498db\",\n                  strokeWidth: \"3\",\n                  points: ((_selectedStation$load = selectedStation.loadData) === null || _selectedStation$load === void 0 ? void 0 : (_selectedStation$load2 = _selectedStation$load.history) === null || _selectedStation$load2 === void 0 ? void 0 : _selectedStation$load2.map((load, index) => `${index * 60 + 30},${150 - load / 200 * 150}`).join(' ')) || ''\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1456,\n                  columnNumber: 23\n                }, this), (_selectedStation$load3 = selectedStation.loadData) === null || _selectedStation$load3 === void 0 ? void 0 : (_selectedStation$load4 = _selectedStation$load3.history) === null || _selectedStation$load4 === void 0 ? void 0 : _selectedStation$load4.map((load, index) => /*#__PURE__*/_jsxDEV(\"circle\", {\n                  cx: index * 60 + 30,\n                  cy: 150 - load / 200 * 150,\n                  r: \"4\",\n                  fill: \"#3498db\",\n                  stroke: \"#fff\",\n                  strokeWidth: \"2\"\n                }, index, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1467,\n                  columnNumber: 25\n                }, this))]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1446,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1445,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"chart-x-axis\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"5\\u5929\\u524D\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1480,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"4\\u5929\\u524D\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1481,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"3\\u5929\\u524D\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1482,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"2\\u5929\\u524D\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1483,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"\\u6628\\u5929\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1484,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1479,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1437,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"load-stats\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"stat-item\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"stat-label\",\n                children: \"\\u5F53\\u524D\\u8D1F\\u8377\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1490,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"stat-value\",\n                children: [((_selectedStation$load5 = selectedStation.loadData) === null || _selectedStation$load5 === void 0 ? void 0 : _selectedStation$load5.current) || 0, \"MW\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1491,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1489,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"stat-item\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"stat-label\",\n                children: \"\\u5E73\\u5747\\u8D1F\\u8377\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1494,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"stat-value\",\n                children: [(_selectedStation$load6 = selectedStation.loadData) !== null && _selectedStation$load6 !== void 0 && _selectedStation$load6.history ? Math.round(selectedStation.loadData.history.reduce((a, b) => a + b, 0) / selectedStation.loadData.history.length) : 0, \"MW\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1495,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1493,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"stat-item\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"stat-label\",\n                children: \"\\u5CF0\\u503C\\u8D1F\\u8377\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1501,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"stat-value\",\n                children: [(_selectedStation$load7 = selectedStation.loadData) !== null && _selectedStation$load7 !== void 0 && _selectedStation$load7.history ? Math.max(...selectedStation.loadData.history) : 0, \"MW\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1502,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1500,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1488,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1435,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1417,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1412,\n      columnNumber: 9\n    }, this), showMeterBoxes && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"meter-boxes-panel\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"panel-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"\\uD83D\\uDCE6 \\u8868\\u7BB1\\u5185\\u90E8\\u5E03\\u5C40\\u5C55\\u793A\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1517,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setShowMeterBoxes(false),\n          children: \"\\u2715\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1518,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1516,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"panel-content\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"meter-boxes-grid\",\n          children: [...powerGridData.filter(item => item.type === 'è¡¨ç®±'), ...userGridData.filter(item => item.type === 'è¡¨ç®±')].map(box => {\n            var _box$meterLayout3, _box$meterLayout4, _box$meterLayout4$met, _box$meterLayout5, _box$meterLayout5$met;\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"meter-box-card\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"box-header\",\n                children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                  children: box.name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1528,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"box-address\",\n                  children: box.address\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1529,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1527,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"meter-layout-display\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  dangerouslySetInnerHTML: {\n                    __html: generateMeterLayoutHtml(box.meterLayout)\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1532,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1531,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"box-stats\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  children: [\"\\u603B\\u8868\\u4F4D: \", ((_box$meterLayout3 = box.meterLayout) === null || _box$meterLayout3 === void 0 ? void 0 : _box$meterLayout3.totalMeters) || 0]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1537,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: [\"\\u5F02\\u5E38: \", ((_box$meterLayout4 = box.meterLayout) === null || _box$meterLayout4 === void 0 ? void 0 : (_box$meterLayout4$met = _box$meterLayout4.meters) === null || _box$meterLayout4$met === void 0 ? void 0 : _box$meterLayout4$met.filter(m => m.status !== 'æ­£å¸¸').length) || 0]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1538,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: [\"\\u6B20\\u8D39: \", ((_box$meterLayout5 = box.meterLayout) === null || _box$meterLayout5 === void 0 ? void 0 : (_box$meterLayout5$met = _box$meterLayout5.meters) === null || _box$meterLayout5$met === void 0 ? void 0 : _box$meterLayout5$met.filter(m => m.paymentStatus === 'æ¬ è´¹').length) || 0]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1539,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1536,\n                columnNumber: 19\n              }, this)]\n            }, box.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1526,\n              columnNumber: 17\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1521,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1520,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1515,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 1125,\n    columnNumber: 5\n  }, this);\n};\n_s(MapComponent, \"3gl2BsG5p/vUk0CeR1p7EcZGuVs=\");\n_c = MapComponent;\nexport default MapComponent;\nvar _c;\n$RefreshReg$(_c, \"MapComponent\");","map":{"version":3,"names":["React","useEffect","useRef","useState","powerGridData","userGridData","areaLossData","abnormalMeters","jsxDEV","_jsxDEV","MapComponent","_s","_selectedStation$load","_selectedStation$load2","_selectedStation$load3","_selectedStation$load4","_selectedStation$load5","_selectedStation$load6","_selectedStation$load7","mapRef","mapInstance","showValidationPanel","setShowValidationPanel","showAbnormalList","setShowAbnormalList","showLossAnalysis","setShowLossAnalysis","lossChartType","setLossChartType","validationResults","setValidationResults","showLoadMonitor","setShowLoadMonitor","selectedStation","setSelectedStation","showMeterBoxes","setShowMeterBoxes","setCurrentZoom","autoMeterBoxMode","setAutoMeterBoxMode","autoValidationMode","setAutoValidationMode","meterBoxPopups","validationPopups","timer","setTimeout","window","AMap","console","warn","showFallbackMap","current","Map","zoom","center","mapStyle","viewMode","lang","on","addPowerGridMarkers","zoomHandler","getZoom","error","clearTimeout","destroy","handleZoomChange","openAllMeterBoxPopups","closeAllMeterBoxPopups","openAllValidationErrorPopups","closeAllValidationErrorPopups","off","fixValidationError","deviceId","alert","showMeterLayout","innerHTML","addFallbackMarkers","facilities","name","type","x","y","status","transmissionLines","start","end","forEach","facility","markerEl","document","createElement","colors","icons","style","cssText","title","appendChild","line","lineEl","dx","dy","length","Math","sqrt","angle","atan2","PI","lineColor","lineStyle","midX","midY","lineLabelEl","createCustomInfoWindow","data","position","voltage","voltageData","content","address","meterLayout","map","meter","user","join","marker","Marker","offset","Pixel","zIndex","meterBoxes","filter","item","log","box","id","markers","getAllOverlays","successCount","find","m","getExtData","infoMarker","getPosition","setMap","push","e","addTransmissionLine","addPointMarker","addUserMarker","addAbnormalDeviceMarkers","allAbnormalDevices","device","validationErrors","location","lng","longitude","lat","latitude","errors","allMeterBoxes","_box$meterLayout","_box$meterLayout$mete","meters","message","field","addAbnormalDeviceMarker","hasError","some","color","size","circle","Circle","LngLat","radius","strokeColor","strokeWeight","strokeStyle","fillColor","fillOpacity","icon","Icon","Size","image","createAbnormalIcon","imageOffset","imageSize","isError","symbol","svgContent","encodeURIComponent","performDeviceValidation","targetArea","allDevices","results","highlightValidationErrors","result","errorLevel","errorMarker","createErrorIcon","extData","showValidationErrorWindow","target","add","level","strokePattern","createValidationErrorWindow","levelText","levelColor","errorDevices","errorCount","getIconByType","showInfoWindow","_item$meterLayout","_item$meterLayout$met","hasAbnormalMeters","createMeterBoxIcon","isAbnormal","textColor","setAnimation","showUserInfoWindow","lineData","path","startPoint","endPoint","getLineColor","polyline","Polyline","strokeOpacity","showLineInfoWindow","lnglat","midLat","midLng","lineMarker","iconMap","infoWindow","InfoWindow","capacity","load","open","lineOrMarker","lineDetails","wireType","diameter","generateMeterLayoutHtml","totalMeters","layoutHtml","i","statusClass","getStatusClass","paymentClass","paymentStatus","powerTypeClass","getPowerTypeClass","powerType","householder","userType","owingAmount","locateAbnormalMeter","meterId","meterBox","_box$meterLayout2","_box$meterLayout2$met","setCenter","setZoom","highlightMarker","remove","boxMarker","_marker$getExtData","locateValidationError","_","errorsHtml","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","newMode","print","ref","index","lastOnline","area","dates","date","height","theoreticalLoss","actualLoss","slice","width","viewBox","patternUnits","d","fill","stroke","strokeWidth","points","loss","cx","cy","r","textAnchor","fontSize","station","_station$loadData","loadData","history","round","reduce","a","b","max","_box$meterLayout3","_box$meterLayout4","_box$meterLayout4$met","_box$meterLayout5","_box$meterLayout5$met","dangerouslySetInnerHTML","__html","_c","$RefreshReg$"],"sources":["/Volumes/ORICO/å…¬å¸/æ–°ç–†ç”µç½‘/æ ·ä¾‹/src/components/MapComponent.js"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\nimport './MapComponent.css';\nimport { powerGridData, userGridData, areaLossData, abnormalMeters } from '../data/powerGridData';\n\nconst MapComponent = () => {\n  const mapRef = useRef(null);\n  const mapInstance = useRef(null);\n  const [showValidationPanel, setShowValidationPanel] = useState(false);\n  const [showAbnormalList, setShowAbnormalList] = useState(false);\n  const [showLossAnalysis, setShowLossAnalysis] = useState(false);\n  const [lossChartType, setLossChartType] = useState('bar'); // 'bar' æˆ– 'line'\n  const [validationResults, setValidationResults] = useState([]);\n  const [showLoadMonitor, setShowLoadMonitor] = useState(false);\n  const [selectedStation, setSelectedStation] = useState(null);\n  const [showMeterBoxes, setShowMeterBoxes] = useState(false);\n  const [, setCurrentZoom] = useState(10);\n  const [autoMeterBoxMode, setAutoMeterBoxMode] = useState(false);\n  const [autoValidationMode, setAutoValidationMode] = useState(false);\n  const meterBoxPopups = useRef([]);\n  const validationPopups = useRef([]);\n\n  useEffect(() => {\n    // å»¶è¿Ÿæ£€æŸ¥ï¼Œç¡®ä¿é«˜å¾·åœ°å›¾APIæœ‰æ—¶é—´åŠ è½½\n    const timer = setTimeout(() => {\n      if (!window.AMap) {\n        console.warn('é«˜å¾·åœ°å›¾APIæœªåŠ è½½ï¼Œå¯ç”¨æ¼”ç¤ºæ¨¡å¼');\n        showFallbackMap();\n        return;\n      }\n\n      try {\n        // åˆå§‹åŒ–åœ°å›¾\n        mapInstance.current = new window.AMap.Map(mapRef.current, {\n          zoom: 10,\n          center: [116.397428, 39.90923], // åŒ—äº¬ä¸­å¿ƒç‚¹\n          mapStyle: 'amap://styles/blue', // è“è‰²ä¸»é¢˜\n          viewMode: '2D',\n          lang: 'zh_cn'\n        });\n\n        // åœ°å›¾åŠ è½½å®Œæˆåæ·»åŠ ç”µåŠ›ç”µç½‘æ•°æ®ç‚¹\n        mapInstance.current.on('complete', () => {\n          addPowerGridMarkers();\n        });\n\n        // å­˜å‚¨ç¼©æ”¾å¤„ç†å‡½æ•°çš„å¼•ç”¨\n        const zoomHandler = () => {\n          const zoom = mapInstance.current.getZoom();\n          setCurrentZoom(zoom);\n        };\n\n        // ç›‘å¬åœ°å›¾ç¼©æ”¾å˜åŒ–\n        mapInstance.current.on('zoomchange', zoomHandler);\n\n      } catch (error) {\n        console.error('åœ°å›¾åˆå§‹åŒ–å¤±è´¥:', error);\n        showFallbackMap();\n      }\n    }, 1000);\n\n    // æ¸…ç†å‡½æ•°\n    return () => {\n      clearTimeout(timer);\n      if (mapInstance.current) {\n        try {\n          mapInstance.current.destroy();\n        } catch (error) {\n          console.warn('åœ°å›¾é”€æ¯æ—¶å‡ºé”™:', error);\n        }\n      }\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  // è‡ªåŠ¨åŠŸèƒ½ï¼ˆè¡¨ç®±å’Œæ ¡éªŒé”™è¯¯ï¼‰\n  useEffect(() => {\n    if (!mapInstance.current) return;\n\n    const handleZoomChange = () => {\n      const zoom = mapInstance.current.getZoom();\n\n      // è‡ªåŠ¨è¡¨ç®±åŠŸèƒ½ (ç¼©æ”¾çº§åˆ« >= 14)\n      if (autoMeterBoxMode) {\n        if (zoom >= 14) {\n          openAllMeterBoxPopups();\n        } else {\n          closeAllMeterBoxPopups();\n        }\n      }\n\n      // è‡ªåŠ¨æ ¡éªŒé”™è¯¯åŠŸèƒ½ (ç¼©æ”¾çº§åˆ« >= 12)\n      if (autoValidationMode) {\n        if (zoom >= 12) {\n          openAllValidationErrorPopups();\n        } else {\n          closeAllValidationErrorPopups();\n        }\n      }\n    };\n\n    // ç›‘å¬ç¼©æ”¾å˜åŒ–\n    mapInstance.current.on('zoomchange', handleZoomChange);\n\n    // ç«‹å³æ£€æŸ¥å½“å‰çŠ¶æ€\n    if (autoMeterBoxMode || autoValidationMode) {\n      handleZoomChange();\n    } else {\n      closeAllMeterBoxPopups();\n      closeAllValidationErrorPopups();\n    }\n\n    return () => {\n      if (mapInstance.current) {\n        mapInstance.current.off('zoomchange', handleZoomChange);\n      }\n    };\n  }, [autoMeterBoxMode, autoValidationMode]);\n\n  // æ·»åŠ å…¨å±€å‡½æ•°åˆ°windowå¯¹è±¡ï¼Œä¾›ä¿¡æ¯çª—å£è°ƒç”¨\n  useEffect(() => {\n    // è¡¨ç®±å¸ƒå±€ç°åœ¨é»˜è®¤æ˜¾ç¤ºï¼Œä¸éœ€è¦åˆ‡æ¢å‡½æ•°\n\n    window.fixValidationError = (deviceId) => {\n      alert(`æ­£åœ¨ä¿®å¤è®¾å¤‡ ${deviceId} çš„æ ¡éªŒé”™è¯¯...`);\n      // è¿™é‡Œå¯ä»¥å®ç°å®é™…çš„ä¿®å¤é€»è¾‘\n    };\n\n    return () => {\n      delete window.showMeterLayout;\n      delete window.fixValidationError;\n    };\n  }, []);\n\n  const showFallbackMap = () => {\n    // æ˜¾ç¤ºæ¨¡æ‹Ÿåœ°å›¾ç•Œé¢\n    if (mapRef.current) {\n      mapRef.current.innerHTML = `\n        <div style=\"\n          width: 100%;\n          height: 100%;\n          background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n          position: relative;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          color: white;\n          font-size: 18px;\n          text-align: center;\n        \">\n          <div>\n            <h3 style=\"margin-bottom: 20px;\">ğŸ“ ç”µåŠ›ç”µç½‘åœ°å›¾æ¼”ç¤ºæ¨¡å¼</h3>\n            <p style=\"margin-bottom: 10px;\">é«˜å¾·åœ°å›¾APIæœªé…ç½®</p>\n            <p style=\"margin-bottom: 20px; font-size: 14px; opacity: 0.8;\">\n              è¯·ç”³è¯·é«˜å¾·åœ°å›¾API Keyå¹¶åœ¨ public/index.html ä¸­é…ç½®\n            </p>\n            <p style=\"font-size: 14px; opacity: 0.8;\">\n              æˆ–æŸ¥çœ‹ demo.html æ–‡ä»¶è·å¾—å®Œæ•´æ¼”ç¤ºæ•ˆæœ\n            </p>\n          </div>\n        </div>\n      `;\n      // æ·»åŠ æ¨¡æ‹Ÿçš„ç”µåŠ›è®¾æ–½æ ‡è®°\n      addFallbackMarkers();\n    }\n  };\n\n  const addFallbackMarkers = () => {\n    // è®¾æ–½ç‚¹ä½\n    const facilities = [\n      { name: 'åŒ—äº¬ç¬¬ä¸€çƒ­ç”µå‚', type: 'å‘ç”µå‚', x: 20, y: 15, status: 'æ­£å¸¸' },\n      { name: 'æœé˜³å˜ç”µç«™', type: 'å˜ç”µç«™', x: 40, y: 25, status: 'æ­£å¸¸' },\n      { name: 'æµ·æ·€å˜ç”µç«™', type: 'å˜ç”µç«™', x: 15, y: 35, status: 'ç»´æŠ¤' },\n      { name: 'å¤§å…´ç‡ƒæ°”ç”µå‚', type: 'å‘ç”µå‚', x: 25, y: 65, status: 'æ­£å¸¸' },\n      { name: 'ä¸°å°å˜ç”µç«™', type: 'å˜ç”µç«™', x: 35, y: 55, status: 'æ­£å¸¸' }\n    ];\n\n    // è¾“ç”µçº¿è·¯ï¼ˆè¿æ¥å„ä¸ªè®¾æ–½ï¼‰\n    const transmissionLines = [\n      { name: 'ä¸œåŸè¾“ç”µçº¿è·¯1', start: { x: 20, y: 15 }, end: { x: 40, y: 25 }, status: 'æ­£å¸¸' },\n      { name: 'è¥¿åŸè¾“ç”µçº¿è·¯2', start: { x: 15, y: 35 }, end: { x: 35, y: 55 }, status: 'æ•…éšœ' },\n      { name: 'æˆ¿å±±è¾“ç”µçº¿è·¯3', start: { x: 25, y: 65 }, end: { x: 35, y: 55 }, status: 'æ­£å¸¸' }\n    ];\n\n    // ç»˜åˆ¶è®¾æ–½ç‚¹ä½\n    facilities.forEach(facility => {\n      const markerEl = document.createElement('div');\n      const colors = { 'å‘ç”µå‚': '#ff6600', 'å˜ç”µç«™': '#0066ff' };\n      const icons = { 'å‘ç”µå‚': 'âš¡', 'å˜ç”µç«™': 'ğŸ”Œ' };\n      \n      markerEl.style.cssText = `\n        position: absolute;\n        left: ${facility.x}%;\n        top: ${facility.y}%;\n        width: 30px;\n        height: 30px;\n        background: ${colors[facility.type]};\n        border-radius: 50%;\n        border: 2px solid white;\n        color: white;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        font-size: 14px;\n        cursor: pointer;\n        box-shadow: 0 2px 8px rgba(0,0,0,0.3);\n        animation: pulse 2s infinite;\n        z-index: 10;\n      `;\n      markerEl.innerHTML = icons[facility.type];\n      markerEl.title = `${facility.name} - ${facility.status}`;\n      \n      mapRef.current.appendChild(markerEl);\n    });\n\n    // ç»˜åˆ¶è¾“ç”µçº¿è·¯\n    transmissionLines.forEach(line => {\n      const lineEl = document.createElement('div');\n      const dx = line.end.x - line.start.x;\n      const dy = line.end.y - line.start.y;\n      const length = Math.sqrt(dx * dx + dy * dy);\n      const angle = Math.atan2(dy, dx) * 180 / Math.PI;\n      \n      const lineColor = line.status === 'æ•…éšœ' ? '#ff0000' : '#00ff00';\n      const lineStyle = line.status === 'æ•…éšœ' ? 'dashed' : 'solid';\n      \n      lineEl.style.cssText = `\n        position: absolute;\n        left: ${line.start.x}%;\n        top: ${line.start.y}%;\n        width: ${length}%;\n        height: 4px;\n        background: ${lineColor};\n        border-radius: 2px;\n        transform-origin: 0 50%;\n        transform: rotate(${angle}deg);\n        cursor: pointer;\n        z-index: 5;\n        ${lineStyle === 'dashed' ? 'border: 2px dashed ' + lineColor + '; background: transparent;' : ''}\n      `;\n      \n      lineEl.title = `${line.name} - ${line.status}`;\n      \n      mapRef.current.appendChild(lineEl);\n\n      // åœ¨çº¿è·¯ä¸­ç‚¹æ·»åŠ æ ‡è¯†\n      const midX = (line.start.x + line.end.x) / 2;\n      const midY = (line.start.y + line.end.y) / 2;\n      \n      const lineLabelEl = document.createElement('div');\n      lineLabelEl.style.cssText = `\n        position: absolute;\n        left: ${midX}%;\n        top: ${midY}%;\n        width: 20px;\n        height: 20px;\n        background: #ff3300;\n        border-radius: 50%;\n        border: 2px solid white;\n        color: white;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        font-size: 12px;\n        cursor: pointer;\n        box-shadow: 0 2px 8px rgba(0,0,0,0.3);\n        z-index: 15;\n      `;\n      lineLabelEl.innerHTML = 'ğŸ”—';\n      lineLabelEl.title = `${line.name} - ${line.status}`;\n      \n      mapRef.current.appendChild(lineLabelEl);\n    });\n  };\n\n\n\n\n\n  // åˆ›å»ºå®Œå…¨æ¨¡æ‹Ÿé«˜å¾·åœ°å›¾InfoWindowæ ·å¼çš„è‡ªå®šä¹‰æ ‡è®°ï¼ˆç´§å‡‘ç‰ˆï¼‰\n  const createCustomInfoWindow = (data, position) => {\n    const voltage = data.voltageData || {};\n\n    // ç´§å‡‘ç‰ˆè¡¨ç®±ä¿¡æ¯çª—å£\n    const content = `\n      <div class=\"amap-info-window-wrapper\" style=\"\n        background: white;\n        border: 1px solid #b8b8b8;\n        border-radius: 3px;\n        box-shadow: 0 2px 6px rgba(0,0,0,0.3);\n        position: relative;\n        font-family: 'Microsoft YaHei', Arial, sans-serif;\n        font-size: 11px;\n        line-height: 1.2;\n        max-width: 280px;\n        padding: 8px;\n      \">\n        <!-- é«˜å¾·åœ°å›¾InfoWindowçš„å°ä¸‰è§’ -->\n        <div style=\"\n          position: absolute;\n          bottom: -6px;\n          left: 50%;\n          transform: translateX(-50%);\n          width: 0;\n          height: 0;\n          border-left: 6px solid transparent;\n          border-right: 6px solid transparent;\n          border-top: 6px solid white;\n          z-index: 2;\n        \"></div>\n        <div style=\"\n          position: absolute;\n          bottom: -7px;\n          left: 50%;\n          transform: translateX(-50%);\n          width: 0;\n          height: 0;\n          border-left: 7px solid transparent;\n          border-right: 7px solid transparent;\n          border-top: 7px solid #b8b8b8;\n          z-index: 1;\n        \"></div>\n\n        <!-- ç´§å‡‘çš„å†…å®¹ç»“æ„ -->\n        <div style=\"margin: 0; padding: 0;\">\n          <h3 style=\"margin: 0 0 4px 0; font-size: 12px; color: #333;\">${data.name}</h3>\n          <div style=\"font-size: 10px; color: #666; margin-bottom: 6px;\">\n            ${data.type} | ${voltage.current || 'N/A'}V | ${data.address}\n          </div>\n          <div style=\"font-size: 10px;\">\n            <strong style=\"color: #333;\">è¡¨è®¡å¸ƒå±€:</strong>\n            <div style=\"display: grid; grid-template-columns: repeat(3, 1fr); gap: 2px; margin-top: 3px;\">\n              ${data.meterLayout ? data.meterLayout.map(meter => `\n                <div style=\"\n                  background: ${meter.status === 'æ­£å¸¸' ? '#e8f5e8' : '#ffe8e8'};\n                  border: 1px solid ${meter.status === 'æ­£å¸¸' ? '#4caf50' : '#f44336'};\n                  border-radius: 2px;\n                  padding: 2px;\n                  text-align: center;\n                  font-size: 8px;\n                \">\n                  <div style=\"font-weight: bold;\">${meter.user}</div>\n                  <div>${meter.voltage}V</div>\n                </div>\n              `).join('') : 'æ— æ•°æ®'}\n            </div>\n          </div>\n        </div>\n      </div>\n    `;\n\n    const marker = new window.AMap.Marker({\n      position: position,\n      content: content,\n      offset: new window.AMap.Pixel(0, -30),\n      zIndex: 1000\n    });\n\n    return marker;\n  };\n\n  // æ–°çš„è‡ªåŠ¨è¡¨ç®±åŠŸèƒ½ - ä½¿ç”¨è‡ªå®šä¹‰MarkeråŒæ—¶æ˜¾ç¤ºå¤šä¸ª\n  const openAllMeterBoxPopups = () => {\n    if (!mapInstance.current || !window.AMap) return;\n\n    // å…ˆå…³é—­æ‰€æœ‰ç°æœ‰æ˜¾ç¤º\n    closeAllMeterBoxPopups();\n\n    // è·å–æ‰€æœ‰è¡¨ç®±æ•°æ®\n    const meterBoxes = [\n      ...powerGridData.filter(item => item.type === 'è¡¨ç®±'),\n      ...userGridData.filter(item => item.type === 'è¡¨ç®±')\n    ];\n\n    console.log('=== è‡ªåŠ¨è¡¨ç®±åŠŸèƒ½è°ƒè¯• ===');\n    console.log('æ‰¾åˆ°çš„è¡¨ç®±æ•°æ®:', meterBoxes.map(box => ({ id: box.id, name: box.name })));\n\n    // è·å–åœ°å›¾ä¸Šæ‰€æœ‰æ ‡è®°\n    const markers = mapInstance.current.getAllOverlays('marker');\n    console.log('åœ°å›¾ä¸Šçš„æ ‡è®°æ€»æ•°:', markers.length);\n\n    let successCount = 0;\n\n    meterBoxes.forEach((box) => {\n      console.log(`æŸ¥æ‰¾è¡¨ç®±: ${box.name} (ID: ${box.id})`);\n\n      // æ‰¾åˆ°å¯¹åº”çš„æ ‡è®°\n      const marker = markers.find(m => {\n        const data = m.getExtData();\n        return data && data.id === box.id;\n      });\n\n      if (marker) {\n        console.log(`âœ“ æ‰¾åˆ°æ ‡è®°: ${box.name}`);\n        const data = marker.getExtData();\n\n        // åˆ›å»ºè‡ªå®šä¹‰ä¿¡æ¯çª—å£Marker\n        const infoMarker = createCustomInfoWindow(data, marker.getPosition());\n        infoMarker.setMap(mapInstance.current);\n\n        meterBoxPopups.current.push(infoMarker);\n        successCount++;\n        console.log(`âœ“ è‡ªå®šä¹‰InfoWindowå·²åˆ›å»º: ${box.name}`);\n      } else {\n        console.log(`âœ— æœªæ‰¾åˆ°æ ‡è®°: ${box.name} (ID: ${box.id})`);\n      }\n    });\n\n    console.log(`æ€»å…±æˆåŠŸåˆ›å»ºäº† ${successCount} ä¸ªè‡ªå®šä¹‰InfoWindow`);\n    console.log('=== è°ƒè¯•ç»“æŸ ===');\n  };\n\n  // æ–°çš„è‡ªåŠ¨è¡¨ç®±åŠŸèƒ½ - å…³é—­æ‰€æœ‰è¡¨ç®±è‡ªå®šä¹‰Marker\n  const closeAllMeterBoxPopups = () => {\n    meterBoxPopups.current.forEach(infoMarker => {\n      try {\n        infoMarker.setMap(null); // ç§»é™¤è‡ªå®šä¹‰Marker\n      } catch (e) {\n        // å¿½ç•¥å…³é—­é”™è¯¯\n      }\n    });\n    meterBoxPopups.current = [];\n    console.log('æ‰€æœ‰è¡¨ç®±è‡ªå®šä¹‰InfoWindowå·²å…³é—­');\n  };\n\n  const addPowerGridMarkers = () => {\n    // æ·»åŠ ç”µåŠ›è®¾å¤‡\n    powerGridData.forEach(item => {\n      if (item.type === 'è¾“ç”µçº¿è·¯') {\n        // ç»˜åˆ¶è¾“ç”µçº¿è·¯\n        addTransmissionLine(item);\n      } else {\n        // ç»˜åˆ¶ç‚¹æ ‡è®°ï¼ˆå‘ç”µå‚ã€å˜ç”µç«™ï¼‰\n        addPointMarker(item);\n      }\n    });\n\n    // æ·»åŠ ç”¨æˆ·è®¾å¤‡ï¼ˆè¡¨ç®±ï¼‰\n    userGridData.forEach(item => {\n      addUserMarker(item);\n    });\n\n    // æ·»åŠ æ‰€æœ‰å¼‚å¸¸è®¾å¤‡çš„å¯è§†åŒ–æ ‡è¯†\n    addAbnormalDeviceMarkers();\n  };\n\n  // æ·»åŠ å¼‚å¸¸è®¾å¤‡å¯è§†åŒ–æ ‡è®°ï¼ˆé€‚åˆæ‰“å°ï¼‰\n  const addAbnormalDeviceMarkers = () => {\n    // æ”¶é›†æ‰€æœ‰å¼‚å¸¸è®¾å¤‡\n    const allAbnormalDevices = [];\n\n    // æ”¶é›†ç”µåŠ›è®¾å¤‡å¼‚å¸¸\n    powerGridData.forEach(device => {\n      if (device.validationErrors && device.validationErrors.length > 0) {\n        allAbnormalDevices.push({\n          id: device.id,\n          name: device.name,\n          type: device.type,\n          location: { lng: device.longitude, lat: device.latitude },\n          errors: device.validationErrors\n        });\n      }\n    });\n\n    // æ”¶é›†æ‰€æœ‰è¡¨ç®±å¼‚å¸¸ï¼ˆä»ä¸¤ä¸ªæ•°æ®æºï¼‰\n    const allMeterBoxes = [\n      ...powerGridData.filter(item => item.type === 'è¡¨ç®±'),\n      ...userGridData.filter(item => item.type === 'è¡¨ç®±')\n    ];\n\n    allMeterBoxes.forEach(box => {\n      const abnormalMeters = box.meterLayout?.meters?.filter(m => m.status !== 'æ­£å¸¸') || [];\n      if (abnormalMeters.length > 0) {\n        allAbnormalDevices.push({\n          id: box.id,\n          name: box.name,\n          type: 'è¡¨ç®±å¼‚å¸¸',\n          location: { lng: box.longitude, lat: box.latitude },\n          errors: abnormalMeters.map(m => ({\n            type: 'warning',\n            message: `${m.id}: ${m.status}`,\n            field: 'meter_status'\n          }))\n        });\n      }\n    });\n\n    // ä¸ºæ¯ä¸ªå¼‚å¸¸è®¾å¤‡æ·»åŠ å¯è§†åŒ–æ ‡è®°\n    allAbnormalDevices.forEach(device => {\n      addAbnormalDeviceMarker(device);\n    });\n  };\n\n  // æ·»åŠ å•ä¸ªå¼‚å¸¸è®¾å¤‡æ ‡è®°\n  const addAbnormalDeviceMarker = (device) => {\n    const hasError = device.errors.some(e => e.type === 'error');\n    const color = hasError ? '#ff0000' : '#ffa500';\n    const size = hasError ? 1000 : 800;\n\n    // æ·»åŠ åœ†åœˆæ ‡è¯†ï¼ˆé€‚åˆæ‰“å°ï¼‰\n    const circle = new window.AMap.Circle({\n      center: new window.AMap.LngLat(device.location.lng, device.location.lat),\n      radius: size,\n      strokeColor: color,\n      strokeWeight: 4,\n      strokeStyle: hasError ? 'solid' : 'dashed',\n      fillColor: color,\n      fillOpacity: 0.1\n    });\n    circle.setMap(mapInstance.current);\n\n    // æ·»åŠ å¼‚å¸¸æ ‡è®°å›¾æ ‡\n    const marker = new window.AMap.Marker({\n      position: new window.AMap.LngLat(device.location.lng, device.location.lat),\n      icon: new window.AMap.Icon({\n        size: new window.AMap.Size(30, 30),\n        image: createAbnormalIcon(hasError),\n        imageOffset: new window.AMap.Pixel(0, 0), // ä¸åç§»ï¼Œå›¾æ ‡å·¦ä¸Šè§’å¯¹å‡†åæ ‡ç‚¹\n        imageSize: new window.AMap.Size(30, 30)\n      }),\n      title: `${device.name} - ${device.errors.length}ä¸ªå¼‚å¸¸`,\n      zIndex: 1500\n    });\n\n    marker.setMap(mapInstance.current);\n  };\n\n  // åˆ›å»ºå¼‚å¸¸è®¾å¤‡å›¾æ ‡\n  const createAbnormalIcon = (isError) => {\n    const color = isError ? '#ff0000' : '#ffa500';\n    const symbol = isError ? '!' : '!'; // ä½¿ç”¨è‹±æ–‡æ„Ÿå¹å·é¿å…ç¼–ç é—®é¢˜\n\n    const svgContent = `<svg width=\"30\" height=\"30\" viewBox=\"0 0 30 30\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n        <circle cx=\"15\" cy=\"15\" r=\"12\" fill=\"${color}\" stroke=\"#fff\" stroke-width=\"2\" opacity=\"0.9\"/>\n        <circle cx=\"15\" cy=\"15\" r=\"8\" fill=\"none\" stroke=\"#fff\" stroke-width=\"1\"/>\n        <text x=\"15\" y=\"20\" text-anchor=\"middle\" font-size=\"14\" fill=\"#fff\" font-weight=\"bold\">${symbol}</text>\n      </svg>`;\n\n    return `data:image/svg+xml;charset=utf-8,${encodeURIComponent(svgContent)}`;\n  };\n\n  // è®¾å¤‡æ ¡éªŒåŠŸèƒ½\n  const performDeviceValidation = (targetArea = 'all') => {\n    const allDevices = [...powerGridData, ...userGridData];\n    const results = [];\n    \n    allDevices.forEach(device => {\n      if (device.validationErrors && device.validationErrors.length > 0) {\n        results.push({\n          id: device.id,\n          name: device.name,\n          type: device.type,\n          errors: device.validationErrors,\n          location: { lng: device.longitude, lat: device.latitude }\n        });\n      }\n    });\n    \n    setValidationResults(results);\n    setShowValidationPanel(true);\n    \n    // åœ¨åœ°å›¾ä¸Šé«˜äº®æ˜¾ç¤ºæœ‰é”™è¯¯çš„è®¾å¤‡\n    highlightValidationErrors(results);\n  };\n\n  // é«˜äº®æ˜¾ç¤ºæ ¡éªŒé”™è¯¯è®¾å¤‡\n  const highlightValidationErrors = (results) => {\n    results.forEach(result => {\n      const errorLevel = result.errors.some(e => e.type === 'error') ? 'error' : 'warning';\n      const color = errorLevel === 'error' ? '#ff0000' : '#ffa500';\n\n      // æ·»åŠ é™æ€å¼‚å¸¸æ ‡è¯†åœ†åœˆï¼ˆé€‚åˆæ‰“å°ï¼‰\n      const circle = new window.AMap.Circle({\n        center: new window.AMap.LngLat(result.location.lng, result.location.lat),\n        radius: 800, // 800ç±³åŠå¾„\n        strokeColor: color,\n        strokeWeight: 4,\n        strokeStyle: errorLevel === 'error' ? 'solid' : 'dashed',\n        fillColor: color,\n        fillOpacity: 0.15\n      });\n      circle.setMap(mapInstance.current);\n\n      // æ·»åŠ é”™è¯¯æ ‡è®°\n      const errorMarker = new window.AMap.Marker({\n        position: new window.AMap.LngLat(result.location.lng, result.location.lat),\n        icon: new window.AMap.Icon({\n          size: new window.AMap.Size(60, 60),\n          image: createErrorIcon(errorLevel),\n          imageOffset: new window.AMap.Pixel(0, 0), // ä¸åç§»ï¼Œå›¾æ ‡å·¦ä¸Šè§’å¯¹å‡†åæ ‡ç‚¹\n          imageSize: new window.AMap.Size(60, 60)\n        }),\n        title: `${result.name} - ${result.errors.length}ä¸ªé”™è¯¯`,\n        extData: result,\n        zIndex: 1000\n      });\n      \n      errorMarker.on('click', (e) => {\n        showValidationErrorWindow(e.target);\n      });\n      \n      mapInstance.current.add(errorMarker);\n    });\n  };\n\n  // åˆ›å»ºé”™è¯¯å›¾æ ‡ï¼ˆä¼˜åŒ–æ‰“å°æ•ˆæœï¼‰\n  const createErrorIcon = (level) => {\n    const color = level === 'error' ? '#ff0000' : '#ffa500';\n    const symbol = level === 'error' ? 'âš ' : '!';\n    const strokePattern = level === 'error' ? '0' : '5,5';\n\n    const svgContent = `\n      <svg width=\"60\" height=\"60\" xmlns=\"http://www.w3.org/2000/svg\">\n        <circle cx=\"30\" cy=\"30\" r=\"25\" fill=\"${color}\" stroke=\"#000\" stroke-width=\"4\"\n                stroke-dasharray=\"${strokePattern}\" opacity=\"0.9\"/>\n        <circle cx=\"30\" cy=\"30\" r=\"20\" fill=\"none\" stroke=\"#fff\" stroke-width=\"2\"/>\n        <text x=\"30\" y=\"38\" text-anchor=\"middle\" font-size=\"18\" fill=\"#fff\" font-weight=\"bold\">${symbol}</text>\n        <text x=\"30\" y=\"52\" text-anchor=\"middle\" font-size=\"6\" fill=\"#000\" font-weight=\"bold\">å¼‚å¸¸</text>\n      </svg>\n    `;\n\n    return `data:image/svg+xml;charset=utf-8,${encodeURIComponent(svgContent)}`;\n  };\n\n  // åˆ›å»ºæ ¡éªŒé”™è¯¯è‡ªåŠ¨ä¿¡æ¯çª—å£\n  const createValidationErrorWindow = (result, position) => {\n    const errorLevel = result.errors.some(e => e.type === 'error') ? 'error' : 'warning';\n    const levelText = errorLevel === 'error' ? 'ä¸¥é‡é”™è¯¯' : 'è­¦å‘Š';\n    const levelColor = errorLevel === 'error' ? '#ff0000' : '#ffa500';\n\n    const content = `\n      <div class=\"amap-info-window-wrapper\" style=\"\n        background: white;\n        border: 1px solid #b8b8b8;\n        border-radius: 3px;\n        box-shadow: 0 2px 6px rgba(0,0,0,0.3);\n        position: relative;\n        font-family: 'Microsoft YaHei', Arial, sans-serif;\n        font-size: 12px;\n        line-height: 1.4;\n        max-width: 400px;\n      \">\n        <!-- é«˜å¾·åœ°å›¾InfoWindowçš„å°ä¸‰è§’ -->\n        <div style=\"\n          position: absolute;\n          bottom: -6px;\n          left: 50%;\n          transform: translateX(-50%);\n          width: 0;\n          height: 0;\n          border-left: 6px solid transparent;\n          border-right: 6px solid transparent;\n          border-top: 6px solid white;\n          z-index: 2;\n        \"></div>\n        <div style=\"\n          position: absolute;\n          bottom: -7px;\n          left: 50%;\n          transform: translateX(-50%);\n          width: 0;\n          height: 0;\n          border-left: 7px solid transparent;\n          border-right: 7px solid transparent;\n          border-top: 7px solid #b8b8b8;\n          z-index: 1;\n        \"></div>\n\n        <!-- æ ¡éªŒé”™è¯¯å†…å®¹ -->\n        <div class=\"info-window validation-error-window\">\n          <h3 style=\"color: ${levelColor}; margin: 0 0 10px 0;\">${result.name}</h3>\n          <p><strong>è®¾å¤‡ç±»å‹:</strong> ${result.type}</p>\n          <p><strong>é”™è¯¯çº§åˆ«:</strong> <span style=\"color: ${levelColor};\">${levelText}</span></p>\n          <p><strong>é”™è¯¯æ•°é‡:</strong> ${result.errors.length}ä¸ª</p>\n          <div style=\"margin-top: 10px;\">\n            <h4 style=\"margin: 5px 0; color: #333;\">é”™è¯¯è¯¦æƒ…:</h4>\n            <ul style=\"margin: 5px 0; padding-left: 20px;\">\n              ${result.errors.map(error => `\n                <li style=\"color: ${error.type === 'error' ? '#ff0000' : '#ffa500'}; margin: 2px 0;\">\n                  ${error.message}\n                </li>\n              `).join('')}\n            </ul>\n          </div>\n        </div>\n      </div>\n    `;\n\n    const marker = new window.AMap.Marker({\n      position: position,\n      content: content,\n      offset: new window.AMap.Pixel(0, -30),\n      zIndex: 1000\n    });\n\n    return marker;\n  };\n\n  // è‡ªåŠ¨æ ¡éªŒé”™è¯¯æ˜¾ç¤ºåŠŸèƒ½\n  const openAllValidationErrorPopups = () => {\n    if (!mapInstance.current || !window.AMap) return;\n\n    // å…ˆå…³é—­æ‰€æœ‰ç°æœ‰æ˜¾ç¤º\n    closeAllValidationErrorPopups();\n\n    // è·å–æ‰€æœ‰æœ‰æ ¡éªŒé”™è¯¯çš„è®¾å¤‡\n    const allDevices = [...powerGridData, ...userGridData];\n    const errorDevices = [];\n\n    allDevices.forEach(device => {\n      if (device.validationErrors && device.validationErrors.length > 0) {\n        errorDevices.push({\n          id: device.id,\n          name: device.name,\n          type: device.type,\n          errors: device.validationErrors,\n          location: { lng: device.longitude, lat: device.latitude }\n        });\n      }\n    });\n\n    console.log('=== è‡ªåŠ¨æ ¡éªŒé”™è¯¯åŠŸèƒ½è°ƒè¯• ===');\n    console.log('æ‰¾åˆ°çš„é”™è¯¯è®¾å¤‡:', errorDevices.map(device => ({ id: device.id, name: device.name, errorCount: device.errors.length })));\n\n    let successCount = 0;\n\n    errorDevices.forEach((device) => {\n      console.log(`åˆ›å»ºé”™è¯¯ä¿¡æ¯çª—å£: ${device.name} (${device.errors.length}ä¸ªé”™è¯¯)`);\n\n      const position = new window.AMap.LngLat(device.location.lng, device.location.lat);\n      const errorMarker = createValidationErrorWindow(device, position);\n      errorMarker.setMap(mapInstance.current);\n\n      validationPopups.current.push(errorMarker);\n      successCount++;\n      console.log(`âœ“ æ ¡éªŒé”™è¯¯InfoWindowå·²åˆ›å»º: ${device.name}`);\n    });\n\n    console.log(`æ€»å…±æˆåŠŸåˆ›å»ºäº† ${successCount} ä¸ªæ ¡éªŒé”™è¯¯InfoWindow`);\n    console.log('=== è°ƒè¯•ç»“æŸ ===');\n  };\n\n  // å…³é—­æ‰€æœ‰æ ¡éªŒé”™è¯¯è‡ªåŠ¨æ˜¾ç¤º\n  const closeAllValidationErrorPopups = () => {\n    validationPopups.current.forEach(errorMarker => {\n      try {\n        errorMarker.setMap(null);\n      } catch (e) {\n        // å¿½ç•¥å…³é—­é”™è¯¯\n      }\n    });\n    validationPopups.current = [];\n    console.log('æ‰€æœ‰æ ¡éªŒé”™è¯¯InfoWindowå·²å…³é—­');\n  };\n\n  const addPointMarker = (item) => {\n    // åˆ›å»ºè‡ªå®šä¹‰å›¾æ ‡\n    const icon = new window.AMap.Icon({\n      size: new window.AMap.Size(40, 40),\n      image: getIconByType(item.type),\n      imageOffset: new window.AMap.Pixel(0, 0), // ä¸åç§»ï¼Œå›¾æ ‡å·¦ä¸Šè§’å¯¹å‡†åæ ‡ç‚¹\n      imageSize: new window.AMap.Size(40, 40)\n    });\n\n    // åˆ›å»ºæ ‡è®°ç‚¹\n    const marker = new window.AMap.Marker({\n      position: new window.AMap.LngLat(item.longitude, item.latitude),\n      icon: icon,\n      title: item.name,\n      extData: item\n    });\n\n    // æ·»åŠ ç‚¹å‡»äº‹ä»¶\n    marker.on('click', (e) => {\n      showInfoWindow(e.target);\n    });\n\n    // å°†æ ‡è®°æ·»åŠ åˆ°åœ°å›¾\n    mapInstance.current.add(marker);\n  };\n\n  // æ·»åŠ ç”¨æˆ·è¡¨ç®±æ ‡è®°\n  const addUserMarker = (item) => {\n    // æ£€æŸ¥æ˜¯å¦æœ‰å¼‚å¸¸è¡¨è®¡\n    const abnormalMeters = item.meterLayout?.meters?.filter(m => m.status !== 'æ­£å¸¸') || [];\n    const hasAbnormalMeters = abnormalMeters.length > 0;\n\n    // åˆ›å»ºè¡¨ç®±å›¾æ ‡ - å¼‚å¸¸è¡¨ç®±æ˜¾ç¤ºçº¢è‰²ï¼Œæ­£å¸¸è¡¨ç®±æ˜¾ç¤ºè“è‰²ï¼Œæ˜¾ç¤º\"è¡¨ç®±\"æ–‡å­—\n    const createMeterBoxIcon = (isAbnormal) => {\n      const color = isAbnormal ? '#ff0000' : '#0066ff';\n      const textColor = '#ffffff';\n\n      // ä½¿ç”¨ç®€å•çš„çŸ©å½¢å›¾æ ‡ï¼Œé¿å…å¤æ‚çš„SVGç¼–ç \n      const svgContent = `<svg width=\"50\" height=\"35\" viewBox=\"0 0 50 35\" xmlns=\"http://www.w3.org/2000/svg\">\n          <rect x=\"1\" y=\"1\" width=\"48\" height=\"33\" rx=\"4\" fill=\"${color}\" stroke=\"#fff\" stroke-width=\"2\"/>\n          <text x=\"25\" y=\"22\" text-anchor=\"middle\" font-size=\"12\" fill=\"${textColor}\" font-family=\"Arial, sans-serif\" font-weight=\"bold\">è¡¨ç®±</text>\n        </svg>`;\n\n      return `data:image/svg+xml;charset=utf-8,${encodeURIComponent(svgContent)}`;\n    };\n\n    const icon = new window.AMap.Icon({\n      size: new window.AMap.Size(50, 35),\n      image: createMeterBoxIcon(hasAbnormalMeters),\n      imageOffset: new window.AMap.Pixel(0, 0), // ä¸åç§»ï¼Œå›¾æ ‡å·¦ä¸Šè§’å¯¹å‡†åæ ‡ç‚¹\n      imageSize: new window.AMap.Size(50, 35)\n    });\n\n    const marker = new window.AMap.Marker({\n      position: new window.AMap.LngLat(item.longitude, item.latitude),\n      icon: icon,\n      title: item.name + (hasAbnormalMeters ? ` (${abnormalMeters.length}ä¸ªå¼‚å¸¸è¡¨è®¡)` : ''),\n      extData: item\n    });\n\n    // å¦‚æœæœ‰å¼‚å¸¸è¡¨è®¡ï¼Œæ·»åŠ è½»å¾®çš„é—ªçƒæ•ˆæœ\n    if (hasAbnormalMeters) {\n      marker.setAnimation('AMAP_ANIMATION_DROP');\n    }\n\n    marker.on('click', (e) => {\n      showUserInfoWindow(e.target);\n    });\n\n    mapInstance.current.add(marker);\n  };\n\n  const addTransmissionLine = (lineData) => {\n    // åˆ›å»ºçº¿è·¯è·¯å¾„\n    const path = [\n      [lineData.startPoint.longitude, lineData.startPoint.latitude],\n      [lineData.endPoint.longitude, lineData.endPoint.latitude]\n    ];\n\n    // æ ¹æ®çŠ¶æ€è®¾ç½®çº¿è·¯é¢œè‰²\n    const getLineColor = (status) => {\n      switch (status) {\n        case 'æ­£å¸¸': return '#00ff00';\n        case 'æ•…éšœ': return '#ff0000';\n        case 'ç»´æŠ¤': return '#ffa500';\n        case 'åœè¿': return '#808080';\n        default: return '#0066ff';\n      }\n    };\n\n    // åˆ›å»ºçº¿è·¯\n    const polyline = new window.AMap.Polyline({\n      path: path,\n      strokeColor: getLineColor(lineData.status),\n      strokeWeight: 6,\n      strokeOpacity: 0.8,\n      strokeStyle: lineData.status === 'æ•…éšœ' ? 'dashed' : 'solid',\n      extData: lineData\n    });\n\n    // æ·»åŠ ç‚¹å‡»äº‹ä»¶\n    polyline.on('click', (e) => {\n      showLineInfoWindow(e.target, e.lnglat);\n    });\n\n    // å°†çº¿è·¯æ·»åŠ åˆ°åœ°å›¾\n    mapInstance.current.add(polyline);\n\n    // åœ¨çº¿è·¯ä¸­ç‚¹æ·»åŠ æ ‡è¯†\n    const midLat = (lineData.startPoint.latitude + lineData.endPoint.latitude) / 2;\n    const midLng = (lineData.startPoint.longitude + lineData.endPoint.longitude) / 2;\n    \n    const lineMarker = new window.AMap.Marker({\n      position: new window.AMap.LngLat(midLng, midLat),\n      icon: new window.AMap.Icon({\n        size: new window.AMap.Size(30, 30),\n        image: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAiIGhlaWdodD0iMzAiIHZpZXdCb3g9IjAgMCAzMCAzMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTUiIGN5PSIxNSIgcj0iMTIiIGZpbGw9IiNmZjMzMDAiIHN0cm9rZT0iI2ZmZiIgc3Ryb2tlLXdpZHRoPSIyIi8+CjxwYXRoIGQ9Ik04IDE1aDE0IiBzdHJva2U9IiNmZmYiIHN0cm9rZS13aWR0aD0iMyIvPgo8L3N2Zz4=',\n        imageOffset: new window.AMap.Pixel(0, 0), // ä¸åç§»ï¼Œå›¾æ ‡å·¦ä¸Šè§’å¯¹å‡†åæ ‡ç‚¹\n        imageSize: new window.AMap.Size(30, 30)\n      }),\n      title: lineData.name,\n      extData: lineData\n    });\n\n    lineMarker.on('click', (e) => {\n      showLineInfoWindow(e.target, e.target.getPosition());\n    });\n\n    mapInstance.current.add(lineMarker);\n  };\n\n  const getIconByType = (type) => {\n    const iconMap = {\n      'å‘ç”µå‚': 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCA0MCA0MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMjAiIGN5PSIyMCIgcj0iMTgiIGZpbGw9IiNmZjY2MDAiIHN0cm9rZT0iI2ZmZiIgc3Ryb2tlLXdpZHRoPSIyIi8+CjxwYXRoIGQ9Ik0xMiAxNmw0IDRsLTQgNGw0IDRsLTQgNGg4djRoNHYtNGg0bC00LTRsNC00bC00LTRsNC00aC00di00aC00djRoLTRsMCA0eiIgZmlsbD0iI2ZmZiIvPgo8L3N2Zz4=',\n      'å˜ç”µç«™': 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCA0MCA0MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMjAiIGN5PSIyMCIgcj0iMTgiIGZpbGw9IiMwMDY2ZmYiIHN0cm9rZT0iI2ZmZiIgc3Ryb2tlLXdpZHRoPSIyIi8+CjxyZWN0IHg9IjE0IiB5PSIxMCIgd2lkdGg9IjEyIiBoZWlnaHQ9IjgiIGZpbGw9IiNmZmYiLz4KPHJlY3QgeD0iMTQiIHk9IjIyIiB3aWR0aD0iMTIiIGhlaWdodD0iOCIgZmlsbD0iI2ZmZiIvPgo8bGluZSB4MT0iMTQiIHkxPSIxOCIgeDI9IjI2IiB5Mj0iMTgiIHN0cm9rZT0iI2ZmZiIgc3Ryb2tlLXdpZHRoPSIyIi8+CjxsaW5lIHgxPSIxNCIgeTE9IjIyIiB4Mj0iMjYiIHkyPSIyMiIgc3Ryb2tlPSIjZmZmIiBzdHJva2Utd2lkdGg9IjIiLz4KPC9zdmc+',\n      'è¾“ç”µçº¿è·¯': 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCA0MCA0MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMjAiIGN5PSIyMCIgcj0iMTgiIGZpbGw9IiNmZjMzMDAiIHN0cm9rZT0iI2ZmZiIgc3Ryb2tlLXdpZHRoPSIyIi8+CjxwYXRoIGQ9Ik0xMCAyMGw2LTZsNiA2bDYtNiIgc3Ryb2tlPSIjZmZmIiBzdHJva2Utd2lkdGg9IjIiIGZpbGw9Im5vbmUiLz4KPHBhdGggZD0iTTEwIDI2bDYtNmw2IDZsNi02IiBzdHJva2U9IiNmZmYiIHN0cm9rZS13aWR0aD0iMiIgZmlsbD0ibm9uZSIvPgo8L3N2Zz4='\n    };\n    return iconMap[type] || iconMap['å‘ç”µå‚'];\n  };\n\n  const showInfoWindow = (marker) => {\n    const data = marker.getExtData();\n    const infoWindow = new window.AMap.InfoWindow({\n      content: `\n        <div class=\"info-window\">\n          <h3>${data.name}</h3>\n          <p><strong>ç±»å‹:</strong> ${data.type}</p>\n          <p><strong>å®¹é‡:</strong> ${data.capacity}</p>\n          <p><strong>çŠ¶æ€:</strong> <span class=\"status ${data.status}\">${data.status}</span></p>\n          <p><strong>è´Ÿè·:</strong> ${data.load}</p>\n          <p><strong>ä½ç½®:</strong> ${data.address}</p>\n        </div>\n      `,\n      offset: new window.AMap.Pixel(0, -30)\n    });\n    infoWindow.open(mapInstance.current, marker.getPosition());\n  };\n\n  const showLineInfoWindow = (lineOrMarker, position) => {\n    const data = lineOrMarker.getExtData();\n    const lineDetails = data.lineDetails || {};\n    const infoWindow = new window.AMap.InfoWindow({\n      content: `\n        <div class=\"info-window\">\n          <h3>${data.name}</h3>\n          <p><strong>ç±»å‹:</strong> ${data.type}</p>\n          <p><strong>å®¹é‡:</strong> ${data.capacity}</p>\n          <p><strong>çŠ¶æ€:</strong> <span class=\"status ${data.status}\">${data.status}</span></p>\n          <p><strong>è´Ÿè·:</strong> ${data.load}</p>\n          <p><strong>èµ·ç‚¹:</strong> ${data.startPoint.name}</p>\n          <p><strong>ç»ˆç‚¹:</strong> ${data.endPoint.name}</p>\n          <p><strong>å¯¼çº¿å‹å·:</strong> ${lineDetails.wireType || 'N/A'}</p>\n          <p><strong>çº¿å¾„:</strong> ${lineDetails.diameter || 'N/A'}</p>\n          <p><strong>æ•·è®¾é•¿åº¦:</strong> ${lineDetails.length || 'N/A'}</p>\n          <p><strong>ä½ç½®:</strong> ${data.address}</p>\n        </div>\n      `,\n      offset: new window.AMap.Pixel(0, -30)\n    });\n    infoWindow.open(mapInstance.current, position);\n  };\n\n  // æ˜¾ç¤ºç”¨æˆ·ä¿¡æ¯çª—å£\n  const showUserInfoWindow = (marker) => {\n    const data = marker.getExtData();\n    const voltage = data.voltageData || {};\n\n    const infoWindow = new window.AMap.InfoWindow({\n      content: `\n        <div class=\"info-window meter-box-window\">\n          <h3>${data.name}</h3>\n          <p><strong>ç±»å‹:</strong> ${data.type}</p>\n          <p><strong>ç”µå‹:</strong> ${voltage.current || 'N/A'}V (${voltage.status || 'N/A'})</p>\n          <p><strong>ä½ç½®:</strong> ${data.address}</p>\n          <div class=\"meter-layout-container\">\n            <h4>è¡¨ç®±å†…éƒ¨å¸ƒå±€</h4>\n            ${generateMeterLayoutHtml(data.meterLayout)}\n          </div>\n        </div>\n      `,\n      offset: new window.AMap.Pixel(0, -30)\n    });\n    infoWindow.open(mapInstance.current, marker.getPosition());\n  };\n\n  // ç”Ÿæˆè¡¨ç®±å†…éƒ¨å¸ƒå±€HTML\n  const generateMeterLayoutHtml = (meterLayout) => {\n    if (!meterLayout || !meterLayout.meters) {\n      return '<p>æš‚æ— å¸ƒå±€ä¿¡æ¯</p>';\n    }\n\n    const meters = meterLayout.meters;\n    const totalMeters = meterLayout.totalMeters || meters.length;\n\n    // ä½¿ç”¨3åˆ—ç½‘æ ¼å¸ƒå±€\n\n    let layoutHtml = '<div class=\"meter-grid\">';\n\n    for (let i = 0; i < totalMeters; i++) {\n      const meter = meters[i];\n      if (meter) {\n        const statusClass = getStatusClass(meter.status);\n        const paymentClass = meter.paymentStatus === 'æ¬ è´¹' ? 'owing' : '';\n        const powerTypeClass = getPowerTypeClass(meter.powerType);\n        layoutHtml += `\n          <div class=\"meter-slot ${statusClass} ${paymentClass} ${powerTypeClass}\"\n               title=\"${meter.householder} - ${meter.status} - ${meter.powerType} - ${meter.userType}\">\n            <div class=\"meter-id\">${meter.id}</div>\n            <div class=\"meter-user\">${meter.householder}</div>\n            <div class=\"meter-type\">${meter.userType}</div>\n            <div class=\"meter-power-type\">${meter.powerType}</div>\n            <div class=\"meter-voltage\">${meter.voltage}V</div>\n            <div class=\"meter-status\">${meter.status}</div>\n            ${meter.paymentStatus === 'æ¬ è´¹' ? `<div class=\"owing-amount\">æ¬ è´¹: Â¥${meter.owingAmount}</div>` : ''}\n          </div>\n        `;\n      } else {\n        layoutHtml += '<div class=\"meter-slot empty\">ç©ºä½</div>';\n      }\n    }\n\n    layoutHtml += '</div>';\n    return layoutHtml;\n  };\n\n  // è·å–çŠ¶æ€æ ·å¼ç±»\n  const getStatusClass = (status) => {\n    switch (status) {\n      case 'æ­£å¸¸': return 'normal';\n      case 'é€šä¿¡æ•…éšœ': return 'comm-error';\n      case 'ç”µå‹å¼‚å¸¸': return 'voltage-error';\n      case 'æ•°æ®é”™è¯¯': return 'data-error';\n      default: return 'unknown';\n    }\n  };\n\n  // è·å–ç”¨ç”µç±»å‹æ ·å¼ç±»\n  const getPowerTypeClass = (powerType) => {\n    switch (powerType) {\n      case 'Aç›¸': return 'phase-a';\n      case 'Bç›¸': return 'phase-b';\n      case 'Cç›¸': return 'phase-c';\n      default: return '';\n    }\n  };\n\n  // å®šä½å¼‚å¸¸è¡¨è®¡\n  const locateAbnormalMeter = (meterId) => {\n    // æŸ¥æ‰¾åŒ…å«è¯¥è¡¨è®¡çš„è¡¨ç®±\n    const meterBox = userGridData.find(box =>\n      box.meterLayout?.meters?.some(meter => meter.id === meterId)\n    );\n\n    if (meterBox && mapInstance.current) {\n      // å®šä½åˆ°è¡¨ç®±ä½ç½®\n      const position = new window.AMap.LngLat(meterBox.longitude, meterBox.latitude);\n      mapInstance.current.setCenter(position);\n      mapInstance.current.setZoom(16);\n\n      // é«˜äº®æ˜¾ç¤ºè¯¥è¡¨ç®±\n      const highlightMarker = new window.AMap.Marker({\n        position: position,\n        icon: new window.AMap.Icon({\n          size: new window.AMap.Size(80, 80),\n          image: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iODAiIHZpZXdCb3g9IjAgMCA4MCA4MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iNDAiIGN5PSI0MCIgcj0iMzUiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2ZmMDAwMCIgc3Ryb2tlLXdpZHRoPSI0IiBzdHJva2UtZGFzaGFycmF5PSI1LDUiPgogIDxhbmltYXRlIGF0dHJpYnV0ZU5hbWU9InIiIHZhbHVlcz0iMzU7NDU7MzUiIGR1cj0iMnMiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIi8+CiAgPGFuaW1hdGUgYXR0cmlidXRlTmFtZT0ic3Ryb2tlLW9wYWNpdHkiIHZhbHVlcz0iMTswLjM7MSIgZHVyPSIycyIgcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiLz4KPC9jaXJjbGU+Cjwvc3ZnPg==',\n          imageOffset: new window.AMap.Pixel(-40, -40)\n        }),\n        zIndex: 2000\n      });\n\n      mapInstance.current.add(highlightMarker);\n\n      // 3ç§’åç§»é™¤é«˜äº®æ ‡è®°\n      setTimeout(() => {\n        mapInstance.current.remove(highlightMarker);\n      }, 3000);\n\n      // å…³é—­å¼‚å¸¸è¡¨è®¡é¢æ¿\n      setShowAbnormalList(false);\n\n      // æ˜¾ç¤ºè¡¨ç®±ä¿¡æ¯\n      setTimeout(() => {\n        const boxMarker = mapInstance.current.getAllOverlays('marker').find(marker =>\n          marker.getExtData()?.id === meterBox.id\n        );\n        if (boxMarker) {\n          showUserInfoWindow(boxMarker);\n        }\n      }, 500);\n    }\n  };\n\n  // å®šä½è®¾å¤‡æ ¡éªŒé”™è¯¯\n  const locateValidationError = (_, location) => {\n    if (mapInstance.current && location) {\n      // ç§»åŠ¨åœ°å›¾åˆ°è®¾å¤‡ä½ç½®\n      const position = new window.AMap.LngLat(location.lng, location.lat);\n      mapInstance.current.setCenter(position);\n      mapInstance.current.setZoom(15);\n\n      // æ·»åŠ é—ªçƒåŠ¨ç”»æ ‡è®°\n      const highlightMarker = new window.AMap.Marker({\n        position: position,\n        icon: new window.AMap.Icon({\n          size: new window.AMap.Size(100, 100),\n          image: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgdmlld0JveD0iMCAwIDEwMCAxMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxjaXJjbGUgY3g9IjUwIiBjeT0iNTAiIHI9IjQ1IiBmaWxsPSJub25lIiBzdHJva2U9IiNmZjAwMDAiIHN0cm9rZS13aWR0aD0iNiIgc3Ryb2tlLWRhc2hhcnJheT0iMTAsMTAiPgogIDxhbmltYXRlIGF0dHJpYnV0ZU5hbWU9InIiIHZhbHVlcz0iNDU7NjA7NDUiIGR1cj0iMnMiIHJlcGVhdENvdW50PSJpbmRlZmluaXRlIi8+CiAgPGFuaW1hdGUgYXR0cmlidXRlTmFtZT0ic3Ryb2tlLW9wYWNpdHkiIHZhbHVlcz0iMTswLjI7MSIgZHVyPSIycyIgcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiLz4KPC9jaXJjbGU+CjxjaXJjbGUgY3g9IjUwIiBjeT0iNTAiIHI9IjIwIiBmaWxsPSIjZmYwMDAwIiBvcGFjaXR5PSIwLjgiLz4KPHN2ZyB4PSI0MCIgeT0iNDAiIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCI+Cjx0ZXh0IHg9IjEwIiB5PSIxNSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZm9udC1zaXplPSIxNiIgZmlsbD0iI2ZmZiIgZm9udC13ZWlnaHQ9ImJvbGQiPuKaoTwvdGV4dD4KPC9zdmc+Cjwvc3ZnPg==',\n          imageOffset: new window.AMap.Pixel(-50, -50)\n        }),\n        zIndex: 2000\n      });\n\n      mapInstance.current.add(highlightMarker);\n\n      // 5ç§’åç§»é™¤æ ‡è®°\n      setTimeout(() => {\n        mapInstance.current.remove(highlightMarker);\n      }, 5000);\n\n      // å…³é—­æ ¡éªŒé¢æ¿\n      setShowValidationPanel(false);\n    }\n  };\n\n  // æ˜¾ç¤ºæ ¡éªŒé”™è¯¯ä¿¡æ¯çª—å£\n  const showValidationErrorWindow = (marker) => {\n    const data = marker.getExtData();\n    const errorsHtml = data.errors.map(error => `\n      <div class=\"error-item ${error.type}\">\n        <span class=\"error-type\">${error.type === 'error' ? 'é”™è¯¯' : 'è­¦å‘Š'}</span>\n        <span class=\"error-message\">${error.message}</span>\n        <span class=\"error-field\">(${error.field})</span>\n      </div>\n    `).join('');\n    \n    const infoWindow = new window.AMap.InfoWindow({\n      content: `\n        <div class=\"info-window validation-error\">\n          <h3>âš ï¸ ${data.name}</h3>\n          <p><strong>è®¾å¤‡ç±»å‹:</strong> ${data.type}</p>\n          <p><strong>å‘ç°é—®é¢˜:</strong> ${data.errors.length}ä¸ª</p>\n          <div class=\"error-list\">${errorsHtml}</div>\n          <button onclick=\"fixValidationError('${data.id}')\" class=\"btn-fix\">ä¿®å¤é—®é¢˜</button>\n        </div>\n      `,\n      offset: new window.AMap.Pixel(0, -30)\n    });\n    infoWindow.open(mapInstance.current, new window.AMap.LngLat(data.location.lng, data.location.lat));\n  };\n\n  return (\n    <div className=\"map-container\">\n      <div className=\"map-controls\">\n        <div className=\"legend\">\n          <h4>å›¾ä¾‹</h4>\n          <div className=\"legend-item\">\n            <div className=\"legend-icon power-plant\"></div>\n            <span>å‘ç”µå‚</span>\n          </div>\n          <div className=\"legend-item\">\n            <div className=\"legend-icon substation\"></div>\n            <span>å˜ç”µç«™</span>\n          </div>\n          <div className=\"legend-item\">\n            <div className=\"legend-icon transmission\"></div>\n            <span>è¾“ç”µçº¿è·¯</span>\n          </div>\n          <div className=\"legend-item\">\n            <div className=\"legend-icon meter-box\"></div>\n            <span>è¡¨ç®±</span>\n          </div>\n        </div>\n        \n        <div className=\"control-panel\">\n          <h4>è®¾å¤‡ç®¡ç†</h4>\n          <button\n            className=\"control-btn validation-btn\"\n            onClick={() => performDeviceValidation()}\n          >\n            ğŸ“‹ è®¾å¤‡æ ¡éªŒ\n          </button>\n          <button\n            className={`control-btn ${autoValidationMode ? 'active' : ''}`}\n            onClick={() => {\n              const newMode = !autoValidationMode;\n              setAutoValidationMode(newMode);\n              if (newMode) {\n                openAllValidationErrorPopups();\n              } else {\n                closeAllValidationErrorPopups();\n              }\n            }}\n          >\n            {autoValidationMode ? 'ğŸ”“ è‡ªåŠ¨æ ¡éªŒ' : 'ğŸ”’ è‡ªåŠ¨æ ¡éªŒ'}\n          </button>\n          <button\n            className=\"control-btn\"\n            onClick={() => setShowAbnormalList(true)}\n          >\n            âš ï¸ å¼‚å¸¸è¡¨è®¡\n          </button>\n          <button\n            className=\"control-btn\"\n            onClick={() => setShowLossAnalysis(true)}\n          >\n            ğŸ“Š çº¿æŸåˆ†æ\n          </button>\n          <button\n            className=\"control-btn\"\n            onClick={() => setShowLoadMonitor(true)}\n          >\n            ğŸ“ˆ è´Ÿè·ç›‘æ§\n          </button>\n          <button\n            className=\"control-btn\"\n            onClick={() => setShowMeterBoxes(!showMeterBoxes)}\n          >\n            ğŸ“¦ è¡¨ç®±å±•ç¤º\n          </button>\n          <button\n            className={`control-btn ${autoMeterBoxMode ? 'active' : ''}`}\n            onClick={() => {\n              const newMode = !autoMeterBoxMode;\n              setAutoMeterBoxMode(newMode);\n              // å¦‚æœå…³é—­è‡ªåŠ¨æ¨¡å¼ï¼Œç«‹å³å…³é—­æ‰€æœ‰å¼¹çª—\n              if (!newMode) {\n                closeAllMeterBoxPopups();\n              }\n            }}\n          >\n            {autoMeterBoxMode ? 'ğŸ”“ è‡ªåŠ¨è¡¨ç®±' : 'ğŸ”’ è‡ªåŠ¨è¡¨ç®±'}\n          </button>\n          <button\n            className=\"control-btn\"\n            onClick={() => window.print()}\n          >\n            ğŸ–¨ï¸ æ‰“å°åœ°å›¾\n          </button>\n        </div>\n      </div>\n      \n      <div ref={mapRef} className=\"map\"></div>\n      \n      {/* æ ¡éªŒç»“æœé¢æ¿ */}\n      {showValidationPanel && (\n        <div className=\"validation-panel\">\n          <div className=\"panel-header\">\n            <h3>ğŸ“‹ è®¾å¤‡æ ¡éªŒç»“æœ</h3>\n            <button onClick={() => setShowValidationPanel(false)}>âœ•</button>\n          </div>\n          <div className=\"panel-content\">\n            <p>å‘ç° {validationResults.length} ä¸ªè®¾å¤‡å­˜åœ¨é—®é¢˜</p>\n            {validationResults.map(result => (\n              <div key={result.id} className=\"validation-item\">\n                <div className=\"item-header\">\n                  <span className=\"device-name\">{result.name}</span>\n                  <span className=\"device-type\">{result.type}</span>\n                </div>\n                <div className=\"error-count\">\n                  {result.errors.length} ä¸ªé—®é¢˜\n                </div>\n                <div className=\"error-summary\">\n                  {result.errors.map((error, index) => (\n                    <span key={index} className={`error-tag ${error.type}`}>\n                      {error.message}\n                    </span>\n                  ))}\n                </div>\n                <div className=\"validation-actions\">\n                  <button\n                    className=\"locate-btn\"\n                    onClick={() => locateValidationError(result.id, result.location)}\n                  >\n                    ğŸ“ å®šä½\n                  </button>\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n      )}\n      \n      {/* å¼‚å¸¸è¡¨è®¡æ¸…å• */}\n      {showAbnormalList && (\n        <div className=\"abnormal-panel\">\n          <div className=\"panel-header\">\n            <h3>âš ï¸ å¼‚å¸¸è¡¨è®¡æ¸…å•</h3>\n            <button onClick={() => setShowAbnormalList(false)}>âœ•</button>\n          </div>\n          <div className=\"panel-content\">\n            <div className=\"abnormal-list\">\n              {abnormalMeters.map(meter => (\n                <div key={meter.id} className=\"abnormal-item\" onClick={() => locateAbnormalMeter(meter.id)}>\n                  <div className=\"meter-info\">\n                    <span className=\"meter-id\">{meter.id}</span>\n                    <span className=\"householder\">{meter.householder}</span>\n                  </div>\n                  <div className=\"meter-details\">\n                    <span className=\"address\">{meter.address}</span>\n                    <span className={`status ${meter.type}`}>{meter.type}</span>\n                  </div>\n                  <div className=\"last-online\">\n                    æœ€åä¸Šçº¿: {meter.lastOnline}\n                  </div>\n                  <div className=\"locate-btn\">\n                    ğŸ“ ç‚¹å‡»å®šä½\n                  </div>\n                </div>\n              ))}\n            </div>\n          </div>\n        </div>\n      )}\n      \n      {/* çº¿æŸåˆ†æé¢æ¿ */}\n      {showLossAnalysis && (\n        <div className=\"loss-analysis-panel\">\n          <div className=\"panel-header\">\n            <h3>ğŸ“Š å°åŒºçº¿æŸåˆ†æ</h3>\n            <div className=\"chart-controls\">\n              <button\n                className={`chart-type-btn ${lossChartType === 'bar' ? 'active' : ''}`}\n                onClick={() => setLossChartType('bar')}\n              >\n                ğŸ“Š æŸ±çŠ¶å›¾\n              </button>\n              <button\n                className={`chart-type-btn ${lossChartType === 'line' ? 'active' : ''}`}\n                onClick={() => setLossChartType('line')}\n              >\n                ğŸ“ˆ æŠ˜çº¿å›¾\n              </button>\n            </div>\n            <button onClick={() => setShowLossAnalysis(false)}>âœ•</button>\n          </div>\n          <div className=\"panel-content\">\n            {areaLossData.map(area => (\n              <div key={area.id} className=\"loss-chart\">\n                <h4>{area.name}</h4>\n                <div className=\"chart-container\">\n                  <div className=\"chart-legend\">\n                    <span className=\"legend-theoretical\">ç†è®ºçº¿æŸ</span>\n                    <span className=\"legend-actual\">å®é™…çº¿æŸ</span>\n                  </div>\n                  {lossChartType === 'bar' ? (\n                    <div className=\"chart-data\">\n                      {area.dates.map((date, index) => (\n                        <div key={index} className=\"chart-bar\">\n                          <div className=\"bar-group\">\n                            <div\n                              className=\"bar theoretical\"\n                              style={{ height: `${area.theoreticalLoss[index] * 20}px` }}\n                            ></div>\n                            <div\n                              className=\"bar actual\"\n                              style={{ height: `${area.actualLoss[index] * 20}px` }}\n                            ></div>\n                          </div>\n                          <span className=\"bar-label\">{date.slice(-2)}</span>\n                        </div>\n                      ))}\n                    </div>\n                  ) : (\n                    <div className=\"line-chart\">\n                      <svg width=\"100%\" height=\"200\" viewBox=\"0 0 400 200\">\n                        {/* ç½‘æ ¼çº¿ */}\n                        <defs>\n                          <pattern id=\"grid\" width=\"40\" height=\"20\" patternUnits=\"userSpaceOnUse\">\n                            <path d=\"M 40 0 L 0 0 0 20\" fill=\"none\" stroke=\"#e0e0e0\" strokeWidth=\"1\"/>\n                          </pattern>\n                        </defs>\n                        <rect width=\"100%\" height=\"100%\" fill=\"url(#grid)\" />\n\n                        {/* ç†è®ºçº¿æŸæŠ˜çº¿ */}\n                        <polyline\n                          fill=\"none\"\n                          stroke=\"#3498db\"\n                          strokeWidth=\"2\"\n                          points={area.theoreticalLoss.map((loss, index) =>\n                            `${(index * 40) + 20},${180 - (loss * 20)}`\n                          ).join(' ')}\n                        />\n\n                        {/* å®é™…çº¿æŸæŠ˜çº¿ */}\n                        <polyline\n                          fill=\"none\"\n                          stroke=\"#e74c3c\"\n                          strokeWidth=\"2\"\n                          points={area.actualLoss.map((loss, index) =>\n                            `${(index * 40) + 20},${180 - (loss * 20)}`\n                          ).join(' ')}\n                        />\n\n                        {/* æ•°æ®ç‚¹ */}\n                        {area.theoreticalLoss.map((loss, index) => (\n                          <circle\n                            key={`theoretical-${index}`}\n                            cx={(index * 40) + 20}\n                            cy={180 - (loss * 20)}\n                            r=\"3\"\n                            fill=\"#3498db\"\n                          />\n                        ))}\n                        {area.actualLoss.map((loss, index) => (\n                          <circle\n                            key={`actual-${index}`}\n                            cx={(index * 40) + 20}\n                            cy={180 - (loss * 20)}\n                            r=\"3\"\n                            fill=\"#e74c3c\"\n                          />\n                        ))}\n\n                        {/* Xè½´æ ‡ç­¾ */}\n                        {area.dates.map((date, index) => (\n                          <text\n                            key={index}\n                            x={(index * 40) + 20}\n                            y=\"195\"\n                            textAnchor=\"middle\"\n                            fontSize=\"10\"\n                            fill=\"#666\"\n                          >\n                            {date.slice(-2)}\n                          </text>\n                        ))}\n                      </svg>\n                    </div>\n                  )}\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n      )}\n\n      {/* è´Ÿè·ç›‘æ§é¢æ¿ */}\n      {showLoadMonitor && (\n        <div className=\"load-monitor-panel\">\n          <div className=\"panel-header\">\n            <h3>ğŸ“ˆ å˜ç”µç«™è´Ÿè·ç›‘æ§</h3>\n            <button onClick={() => setShowLoadMonitor(false)}>âœ•</button>\n          </div>\n          <div className=\"panel-content\">\n            <div className=\"station-selector\">\n              <h4>é€‰æ‹©å˜ç”µç«™</h4>\n              <div className=\"station-list\">\n                {powerGridData.filter(item => item.type === 'å˜ç”µç«™').map(station => (\n                  <div\n                    key={station.id}\n                    className={`station-item ${selectedStation?.id === station.id ? 'selected' : ''}`}\n                    onClick={() => setSelectedStation(station)}\n                  >\n                    <span className=\"station-name\">{station.name}</span>\n                    <span className=\"station-load\">å½“å‰è´Ÿè·: {station.loadData?.current || 0}MW</span>\n                  </div>\n                ))}\n              </div>\n            </div>\n\n            {selectedStation && (\n              <div className=\"load-chart-container\">\n                <h4>{selectedStation.name} - è´Ÿè·å˜åŒ–è¶‹åŠ¿</h4>\n                <div className=\"load-chart\">\n                  <div className=\"chart-y-axis\">\n                    <span>200MW</span>\n                    <span>150MW</span>\n                    <span>100MW</span>\n                    <span>50MW</span>\n                    <span>0MW</span>\n                  </div>\n                  <div className=\"chart-area\">\n                    <svg width=\"300\" height=\"150\" viewBox=\"0 0 300 150\">\n                      {/* ç½‘æ ¼çº¿ */}\n                      <defs>\n                        <pattern id=\"grid\" width=\"60\" height=\"30\" patternUnits=\"userSpaceOnUse\">\n                          <path d=\"M 60 0 L 0 0 0 30\" fill=\"none\" stroke=\"#ecf0f1\" strokeWidth=\"1\"/>\n                        </pattern>\n                      </defs>\n                      <rect width=\"100%\" height=\"100%\" fill=\"url(#grid)\" />\n\n                      {/* è´Ÿè·æ›²çº¿ */}\n                      <polyline\n                        fill=\"none\"\n                        stroke=\"#3498db\"\n                        strokeWidth=\"3\"\n                        points={selectedStation.loadData?.history?.map((load, index) =>\n                          `${index * 60 + 30},${150 - (load / 200) * 150}`\n                        ).join(' ') || ''}\n                      />\n\n                      {/* æ•°æ®ç‚¹ */}\n                      {selectedStation.loadData?.history?.map((load, index) => (\n                        <circle\n                          key={index}\n                          cx={index * 60 + 30}\n                          cy={150 - (load / 200) * 150}\n                          r=\"4\"\n                          fill=\"#3498db\"\n                          stroke=\"#fff\"\n                          strokeWidth=\"2\"\n                        />\n                      ))}\n                    </svg>\n                  </div>\n                  <div className=\"chart-x-axis\">\n                    <span>5å¤©å‰</span>\n                    <span>4å¤©å‰</span>\n                    <span>3å¤©å‰</span>\n                    <span>2å¤©å‰</span>\n                    <span>æ˜¨å¤©</span>\n                  </div>\n                </div>\n\n                <div className=\"load-stats\">\n                  <div className=\"stat-item\">\n                    <span className=\"stat-label\">å½“å‰è´Ÿè·</span>\n                    <span className=\"stat-value\">{selectedStation.loadData?.current || 0}MW</span>\n                  </div>\n                  <div className=\"stat-item\">\n                    <span className=\"stat-label\">å¹³å‡è´Ÿè·</span>\n                    <span className=\"stat-value\">\n                      {selectedStation.loadData?.history ?\n                        Math.round(selectedStation.loadData.history.reduce((a, b) => a + b, 0) / selectedStation.loadData.history.length) : 0}MW\n                    </span>\n                  </div>\n                  <div className=\"stat-item\">\n                    <span className=\"stat-label\">å³°å€¼è´Ÿè·</span>\n                    <span className=\"stat-value\">\n                      {selectedStation.loadData?.history ? Math.max(...selectedStation.loadData.history) : 0}MW\n                    </span>\n                  </div>\n                </div>\n              </div>\n            )}\n          </div>\n        </div>\n      )}\n\n      {/* è¡¨ç®±å±•ç¤ºé¢æ¿ */}\n      {showMeterBoxes && (\n        <div className=\"meter-boxes-panel\">\n          <div className=\"panel-header\">\n            <h3>ğŸ“¦ è¡¨ç®±å†…éƒ¨å¸ƒå±€å±•ç¤º</h3>\n            <button onClick={() => setShowMeterBoxes(false)}>âœ•</button>\n          </div>\n          <div className=\"panel-content\">\n            <div className=\"meter-boxes-grid\">\n              {[\n                ...powerGridData.filter(item => item.type === 'è¡¨ç®±'),\n                ...userGridData.filter(item => item.type === 'è¡¨ç®±')\n              ].map(box => (\n                <div key={box.id} className=\"meter-box-card\">\n                  <div className=\"box-header\">\n                    <h4>{box.name}</h4>\n                    <span className=\"box-address\">{box.address}</span>\n                  </div>\n                  <div className=\"meter-layout-display\">\n                    <div dangerouslySetInnerHTML={{\n                      __html: generateMeterLayoutHtml(box.meterLayout)\n                    }} />\n                  </div>\n                  <div className=\"box-stats\">\n                    <span>æ€»è¡¨ä½: {box.meterLayout?.totalMeters || 0}</span>\n                    <span>å¼‚å¸¸: {box.meterLayout?.meters?.filter(m => m.status !== 'æ­£å¸¸').length || 0}</span>\n                    <span>æ¬ è´¹: {box.meterLayout?.meters?.filter(m => m.paymentStatus === 'æ¬ è´¹').length || 0}</span>\n                  </div>\n                </div>\n              ))}\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default MapComponent;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}